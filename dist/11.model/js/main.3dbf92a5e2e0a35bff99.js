!function(t){var n={};function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)r.d(e,a,function(n){return t[n]}.bind(null,a));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=64)}({0:function(t,n,r){"use strict";r.d(n,"h",(function(){return h})),r.d(n,"f",(function(){return e})),r.d(n,"c",(function(){return l})),r.d(n,"a",(function(){return o})),r.d(n,"d",(function(){return i})),r.d(n,"g",(function(){return c})),r.d(n,"b",(function(){return d})),r.d(n,"i",(function(){return v})),r.d(n,"e",(function(){return m})),r.d(n,"j",(function(){return p}));var e=function(t,n,r){var e=a(t,t.VERTEX_SHADER,n),o=a(t,t.FRAGMENT_SHADER,r),i=t.createProgram();return t.attachShader(i,e),t.attachShader(i,o),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)?i:(alert("無法初始化著色器程序: "+t.getProgramInfoLog(i)),null)},a=function(t,n,r){var e=t.createShader(n);return t.shaderSource(e,r),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)?e:(alert("編譯著色器時發生錯誤: "+t.getShaderInfoLog(e)),t.deleteShader(e),null)},o=function(t,n,r){var e,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Float32Array,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.STATIC_DRAW,i=t.createBuffer(),u=0,c={buffer:i,get data(){return e},get length(){return e.length},set:function(n){e=new a(n),u=100*Math.ceil(e.length/r/100),t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,u*r*4,o),t.bufferSubData(t.ARRAY_BUFFER,0,e)},add:function(n){var c=e.length,f=100*Math.floor(e.length/r/100);f>=u&&(u=f+100,t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,u*r*4,o),t.bufferSubData(t.ARRAY_BUFFER,0,e));var s=new a(c+r);s.set(e),e=s,this.item(c/r,n)},item:function(n,o){var u=new a(o);e.set(u,n*r),t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferSubData(t.ARRAY_BUFFER,n*r*4,u)},getItem:function(t){return Array.from(e.slice(t*r,(t+1)*r))}};return c.set(n),c},i=function(t,n){var r,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uint8Array,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.STATIC_DRAW,o=t.createBuffer(),i=0,u=3,c={buffer:o,get data(){return r},get length(){return r.length},set:function(n){r=new e(n),i=100*Math.ceil(r.length/u/100),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i*u*4,a),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,r)},add:function(n){var c=r.length,f=100*Math.floor(r.length/u/100);f>=i&&(i=f+100,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i*u*4,a),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,r));var s=new e(c+u);s.set(r),r=s,this.item(c/u,n)},item:function(n,a){var i=new e(a);r.set(i,n*u),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,n*u*4,i)},getItem:function(t){return Array.from(r.slice(t*u,(t+1)*u))}};return c.set(n),c},u=function(t){var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),n},c=function(t,n){var r=u(t),e=new Image;return e.onload=function(){r.width=e.width,r.height=e.height,t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)},e.src=n,r},f=function(t,n,r,e){t.bindFramebuffer(t.FRAMEBUFFER,n),void 0!==r&&void 0!==e&&t.viewport(0,0,r,e)},s=function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n?r?f(t,n.framebuffer,n.width,n.height):f(t,n.framebuffer):r?f(t,null,t.canvas.width,t.canvas.height):f(t,null)},l=function(t,n,r){var e={width:n||t.canvas.clientWidth,height:r||t.canvas.clientHeight},a=u(t);e.texture=a,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,null);var o=t.createFramebuffer();return e.framebuffer=o,t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,a,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e},d={attribFloat:function(t,n,r,e){var a=t.getAttribLocation(n,r);return t.enableVertexAttribArray(a),function(n){t.bindBuffer(t.ARRAY_BUFFER,n),t.vertexAttribPointer(a,e,t.FLOAT,!1,0,0)}}},v={uniform1f:function(t,n,r){var e=t.getUniformLocation(n,r);return function(n){t.uniform1f(e,n)}},uniform2fv:function(t,n,r){var e=t.getUniformLocation(n,r);return function(n){t.uniform2fv(e,n)}},uniform3fv:function(t,n,r){var e=t.getUniformLocation(n,r);return function(n){t.uniform3fv(e,n)}},uniformTexture:function(t,n,r,e){var a=t.getUniformLocation(n,r);return function(n){t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,n),t.uniform1i(a,e)}},uniform1i:function(t,n,r){var e=t.getUniformLocation(n,r);return function(n){t.uniform1i(e,n)}},uniformMatrix4fv:function(t,n,r){var e=t.getUniformLocation(n,r);return function(n){t.uniformMatrix4fv(e,!1,n)}}},h=function(t,n,r,e,a){var o=n(t,r,e);return{programInfo:o,use:function(){t.useProgram(o.program)},attribSet:function(t){for(var n in t)o.attribLocations[n]&&o.attribLocations[n](t[n])},uniformSet:function(t){for(var n in t)o.uniformLocations[n]&&o.uniformLocations[n](t[n])}}},m=function(t){return[[t[0],t[1]],[t[2],t[1]],[t[2],t[3]],[t[0],t[3]]].flat()},b=function(t){t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)},p=function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];s(t,n),r&&b(t)}},1:function(t,n,r){"use strict";r.d(n,"a",(function(){return c})),r.d(n,"b",(function(){return f}));var e=r(3),a=r.n(e),o=r(4),i=r.n(o),u=r(2),c=function(){function t(){a()(this,t)}return i()(t,null,[{key:"normalize",value:function(n){return t.length(n)?t.scale(n,1/t.length(n)):n}},{key:"rotate",value:function(t,n){var r=Math.cos(n),e=Math.sin(n);return[t[0]*r-t[1]*e,t[1]*r+t[0]*e]}},{key:"dot",value:function(t,n){return t[0]*n[0]+t[1]*n[1]}},{key:"cross",value:function(t,n){return t[0]*n[1]-t[1]*n[0]}},{key:"add",value:function(t,n){return[t[0]+n[0],t[1]+n[1]]}},{key:"sub",value:function(t,n){return[t[0]-n[0],t[1]-n[1]]}},{key:"projection",value:function(n,r){var e=t.dot(n,r)/t.dot(r,r);return[r[0]*e,r[1]*e]}},{key:"length",value:function(n){return Math.sqrt(t.dot(n,n))}},{key:"mul",value:function(t,n){return[t[0]*n[0],t[1]*n[1]]}},{key:"div",value:function(t,n){return[t[0]/n[0],t[1]/n[1]]}},{key:"scale",value:function(t,n){return[t[0]*n,t[1]*n]}},{key:"collisionCalc",value:function(n,r,e,a){return t.scale(t.add(t.scale(n,e-a),t.scale(r,2*a)),1/(e+a))}},{key:"getAngle",value:function(t){return Math.atan2(t[1],t[0])}},{key:"floor",value:function(t){return[Math.floor(t[0]),Math.floor(t[1])]}},{key:"fract",value:function(t){return[u.a.fract(t[0]),u.a.fract(t[1])]}},{key:"sin",value:function(t){return[Math.sin(t[0]),Math.sin(t[1])]}},{key:"cos",value:function(t){return[Math.cos(t[0]),Math.cos(t[1])]}},{key:"distance",value:function(n,r){return t.length(t.sub(r,n))}},{key:"mix",value:function(t,n,r){return[u.a.mix(t[0],n[0],r),u.a.mix(t[1],n[1],r)]}},{key:"abs",value:function(t){return[Math.abs(t[0]),Math.abs(t[1])]}},{key:"getLine",value:function(n,r){return{pos:n,dir:t.sub(r,n)}}}]),t}(),f=function(){function t(){a()(this,t)}return i()(t,null,[{key:"set",value:function(t,n,r){return t[0]=n,t[1]=r,t}},{key:"normalize",value:function(n){var r=c.length(n);return r&&t.scale(n,1/r),n}},{key:"add",value:function(t,n){return t[0]+=n[0],t[1]+=n[1],t}},{key:"sub",value:function(t,n){return t[0]-=n[0],t[1]-=n[1],t}},{key:"scale",value:function(t,n){return t[0]*=n,t[1]*=n,t}},{key:"rotate",value:function(t,n){var r=Math.cos(n),e=Math.sin(n),a=[t[0]*r-t[1]*e,t[1]*r+t[0]*e];return t[0]=a[0],t[1]=a[1],t}}]),t}()},13:function(t,n,r){var e=r(8);t.exports=function(t){if(Array.isArray(t))return e(t)}},14:function(t,n){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},15:function(t,n,r){var e=r(8);t.exports=function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}},16:function(t,n){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},2:function(t,n,r){"use strict";r.d(n,"a",(function(){return u}));var e=r(3),a=r.n(e),o=r(4),i=r.n(o),u=function(){function t(){a()(this,t)}return i()(t,null,[{key:"mix",value:function(t,n,r){return t*(1-r)+n*r}},{key:"fract",value:function(t){return(t%=1)<0?t+1:t}}]),t}()},22:function(t,n,r){"use strict";r.d(n,"a",(function(){return s}));var e=r(6),a=r.n(e),o=r(3),i=r.n(o),u=r(4),c=r.n(u),f=r(1),s=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.94;i()(this,t),this.options={pos:n,velocity:r,direct:e,lifespan:a,thickness:o,friction:u,gravity:[0,.981],colorStart:[1,0,0,1],colorEnd:[1,1,0,1]},this.init()}return c()(t,[{key:"init",value:function(){this.prevPos=this.options.pos.slice(),this.pos=this.options.pos.slice(),this.velocityPos=[Math.cos(this.options.direct)*this.options.velocity,Math.sin(this.options.direct)*this.options.velocity],this.lifespan=Math.round(this.options.lifespan),this.maxlife=this.lifespan,this.swing=Math.random()}},{key:"update",value:function(){f.b.set.apply(f.b,[this.prevPos].concat(a()(this.pos))),f.b.add(this.pos,this.velocityPos);var t=[0,Math.sin(2*this.swing*Math.PI)];f.b.rotate(t,f.a.getAngle(this.velocityPos)),f.b.scale(t,this.lifespan/this.maxlife),f.b.add(this.velocityPos,t),f.b.add(this.velocityPos,this.options.gravity),f.b.scale(this.velocityPos,this.options.friction),this.swing+=.07,this.swing%=1,this.lifespan>0&&this.lifespan--}},{key:"setColor",value:function(t,n){n&&(this.options.colorStart=n),t&&(this.options.colorEnd=t)}},{key:"positions",get:function(){return[].concat(a()(this.prevPos),a()(this.pos))}},{key:"colors",get:function(){return[].concat(a()(this.options.colorEnd),a()(this.options.colorStart))}},{key:"lineWidths",get:function(){var t=this.lifespan/this.maxlife;return[0,0,0,0].concat([t*Math.min(this.options.thickness/5,1),0,0,0])}}]),t}()},3:function(t,n){t.exports=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}},4:function(t,n){function r(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}t.exports=function(t,n,e){return n&&r(t.prototype,n),e&&r(t,e),t}},48:function(t,n){t.exports="attribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\nuniform mat4 uModelViewMatrix;\r\nuniform mat4 uProjectionMatrix;\r\nuniform vec2 uSize;\r\nvarying vec2 vTextureCoord;\r\nvarying vec2 vSize;\r\nvoid main(void){\r\n  vSize=uSize;\r\n  vTextureCoord=aTextureCoord;\r\n  vec4 pos=uModelViewMatrix*vec4(aVertexPosition*uSize*.5,0.,1.);\r\n  gl_Position=uProjectionMatrix*pos;\r\n}"},49:function(t,n){t.exports="precision mediump float;\r\nvarying vec2 vTextureCoord;\r\nvarying vec2 vSize;\r\n\r\nfloat distLine(vec2 p,vec2 a,vec2 b,float w){\r\n  vec2 pa=p-a;\r\n  vec2 ba=b-a;\r\n  float t=clamp(dot(pa,ba)/dot(ba,ba),0.,1.);\r\n  return length(pa-ba*t)/w;\r\n}\r\n\r\nvec4 drawLight(float d){\r\n  float highColorRate=smoothstep(1.,0.,d);\r\n  float baseColorRate=smoothstep(1.,0.,d/4.);\r\n  float glowColorRate=smoothstep(1.,0.,d/8.);\r\n  float endColorRate=smoothstep(1.,0.,d/16.);\r\n  vec4 highColor=vec4(1.,1.,1.,1.);\r\n  vec4 baseColor=vec4(.35,.98,.98,1.);\r\n  vec4 glowColor=vec4(.28,.73,.78,1.);\r\n  vec4 endColor=vec4(.2,.25,.91,1.);\r\n  vec4 color=mix(.5*baseColor,highColor,highColorRate)*endColorRate;\r\n  color=mix(.25*glowColor,color,baseColorRate)*endColorRate;\r\n  color=mix(.125*endColor,color,glowColorRate)*endColorRate;\r\n  return color;\r\n}\r\nvec4 distLightLine(vec2 p,vec2 a,vec2 b,float w){\r\n  float d=distLine(p,a,b,w);\r\n  return drawLight(d);\r\n}\r\n\r\nvoid main(void){\r\n  vec4 color=vec4(0.);\r\n  vec2 aspectRatio=vec2(vSize.x/vSize.y,1.);\r\n  vec2 lineWidth=1./vSize;\r\n  if(vTextureCoord.x<lineWidth.x||vTextureCoord.x>1.-lineWidth.x||vTextureCoord.y<lineWidth.y||vTextureCoord.y>1.-lineWidth.y){\r\n    color+=.5*vec4(1.,0.,0.,1.);\r\n  }\r\n  \r\n  vec2 coord=vTextureCoord*aspectRatio;\r\n  vec2 startPos=vec2(0.,.5)*aspectRatio+vec2(aspectRatio.y*.5,0.);\r\n  vec2 endPos=vec2(1.,.5)*aspectRatio-vec2(aspectRatio.y*.5,0.);\r\n  float r=aspectRatio.y*.5/16.;\r\n  color+=distLightLine(coord,startPos,endPos,r);\r\n  gl_FragColor=color;\r\n}"},50:function(t,n){t.exports="attribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat4 uModelViewMatrix;\r\nuniform mat4 uProjectionMatrix;\r\nuniform float uLength;\r\nuniform float ulineWidth;\r\nuniform float uStartRadius;\r\nuniform float uEndRadius;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying vec2 vPos;\r\nvarying vec2 vSize;\r\nvarying vec2 vDir;\r\nvarying float vlineWidth;\r\nvarying float vStartRadius;\r\nvarying float vEndRadius;\r\n\r\nvoid main(void){\r\n  vStartRadius=uStartRadius;\r\n  vEndRadius=uEndRadius;\r\n  vlineWidth=ulineWidth;\r\n  vSize=vec2(uLength,0.)+ulineWidth*2.+ulineWidth*2.*8.+max(uStartRadius,uEndRadius);\r\n  vTextureCoord=aTextureCoord;\r\n  vec4 pos=uModelViewMatrix*vec4(aVertexPosition*vSize*.5,0.,1.);\r\n  vPos=pos.xy;\r\n  vDir=(uModelViewMatrix*vec4(vec2(1.,0.),0.,1.)-uModelViewMatrix*vec4(vec2(0.,0.),0.,1.)).xy;\r\n  gl_Position=uProjectionMatrix*pos;\r\n}"},51:function(t,n){t.exports="precision mediump float;\r\nvarying vec2 vTextureCoord;\r\nvarying vec2 vPos;\r\nvarying vec2 vSize;\r\nvarying vec2 vDir;\r\nvarying float vlineWidth;\r\nvarying float vStartRadius;\r\nvarying float vEndRadius;\r\n\r\nuniform sampler2D uSampler;\r\nuniform vec2 uMouse;\r\nuniform float uTime;\r\nuniform float uStartDensity;\r\nuniform float uEndDensity;\r\nuniform float uStartFixed;\r\nuniform float uEndFixed;\r\n\r\nconst float pi=3.14159265359;\r\nconst int OCTAVE_NUM=5;\r\n\r\nfloat gradual(vec2 p,vec2 a,vec2 b){\r\n  vec2 pa=p-a;\r\n  vec2 ba=b-a;\r\n  return clamp(dot(pa,ba)/dot(ba,ba),0.,1.);\r\n}\r\nfloat distLine(vec2 p,vec2 a,vec2 b,float w){\r\n  vec2 pa=p-a;\r\n  vec2 ba=b-a;\r\n  float t=clamp(dot(pa,ba)/dot(ba,ba),0.,1.);\r\n  return length(pa-ba*t)/w;\r\n}\r\nvec4 drawLight(float d){\r\n  float highColorRate=smoothstep(1.,0.,d);\r\n  float baseColorRate=smoothstep(1.,0.,d/2.);\r\n  float glowColorRate=smoothstep(1.,0.,d/4.);\r\n  float endColorRate=smoothstep(1.,0.,d/8.);\r\n  vec4 highColor=vec4(1.,1.,1.,1.);\r\n  vec4 baseColor=vec4(.35,.98,.98,1.);\r\n  vec4 glowColor=vec4(.28,.73,.78,1.);\r\n  vec4 endColor=vec4(.2,.25,.91,1.);\r\n  vec4 color=mix(.5*baseColor,highColor,pow(highColorRate,2.))*endColorRate;\r\n  color=mix(.25*glowColor,color,pow(baseColorRate,1.))*endColorRate;\r\n  color=mix(.125*endColor,color,pow(glowColorRate,.5))*endColorRate;\r\n  return color;\r\n}\r\nvec4 distLightLine(vec2 p,vec2 a,vec2 b,float w){\r\n  float d=distLine(p,a,b,w);\r\n  return drawLight(d);\r\n}\r\nvec3 random3(vec3 p){\r\n  vec3 f=vec3(\r\n    dot(p,vec3(127.1,311.7,69.5)),\r\n    dot(p,vec3(269.5,183.3,132.7)),\r\n    dot(p,vec3(247.3,108.5,96.5))\r\n  );\r\n  return-1.+2.*fract(sin(f)*43758.5453123);\r\n}\r\nfloat noise_perlin(vec3 p){\r\n  vec3 i=floor(p);\r\n  vec3 s=fract(p);\r\n  float a=dot(random3(i),s);\r\n  float b=dot(random3(i+vec3(1,0,0)),s-vec3(1,0,0));\r\n  float c=dot(random3(i+vec3(0,1,0)),s-vec3(0,1,0));\r\n  float d=dot(random3(i+vec3(0,0,1)),s-vec3(0,0,1));\r\n  float e=dot(random3(i+vec3(1,1,0)),s-vec3(1,1,0));\r\n  float f=dot(random3(i+vec3(1,0,1)),s-vec3(1,0,1));\r\n  float g=dot(random3(i+vec3(0,1,1)),s-vec3(0,1,1));\r\n  float h=dot(random3(i+vec3(1,1,1)),s-vec3(1,1,1));\r\n  //vec3 u=smoothstep(0.,1.,s);\r\n  vec3 u=s*s*(3.-2.*s);\r\n  return mix(mix(mix(a,b,u.x),mix(c,e,u.x),u.y),mix(mix(d,f,u.x),mix(g,h,u.x),u.y),u.z);\r\n}\r\nfloat fbm_noise_perlin(vec3 p){\r\n  float f=0.;\r\n  float a=1.;\r\n  for(int i=0;i<OCTAVE_NUM;i++)\r\n  {\r\n    f+=a*noise_perlin(p);\r\n    p=2.*p;\r\n    a/=2.;\r\n  }\r\n  return f;\r\n}\r\nmat2 rotCoord(float a){\r\n  float sin_factor=sin(a);\r\n  float cos_factor=cos(a);\r\n  mat2 rot=mat2(cos_factor,sin_factor,-sin_factor,cos_factor);\r\n  return rot;\r\n}\r\nvoid main(void){\r\n  vec4 color=vec4(0.);\r\n  \r\n  //color+=texture2D(uSampler,vTextureCoord);\r\n  \r\n  //float len=smoothstep(1.,0.,length(vPos-uMouse)/100.);\r\n  //color+=vec4(vec3(len),1.);\r\n  \r\n  vec2 aspectRatio=vec2(vSize.x/vSize.y,1.);\r\n  vec2 lineWidth=1./vSize;\r\n  if(vTextureCoord.x<lineWidth.x||vTextureCoord.x>1.-lineWidth.x||vTextureCoord.y<lineWidth.y||vTextureCoord.y>1.-lineWidth.y){\r\n    color+=.5*vec4(1.,0.,0.,1.);\r\n  }\r\n  vec2 coord=vTextureCoord*aspectRatio;\r\n  vec2 startPos=vec2(0.,.5)*aspectRatio+vec2(aspectRatio.y*.5,0.);\r\n  vec2 endPos=vec2(1.,.5)*aspectRatio-vec2(aspectRatio.y*.5,0.);\r\n  \r\n  //float r=(.25+.75*gradual01)*aspectRatio.y*.5/4.;\r\n  float r=vlineWidth/vSize.y;\r\n  float a=atan(vDir.y,vDir.x);\r\n  float gradual01=gradual(coord,startPos,endPos);\r\n  float swing=sin(gradual01*pi);\r\n  swing=1.-pow(1.-swing,2.);\r\n  float pp=noise_perlin(vec3(vPos*.01,uTime*3.));\r\n  float f0=fbm_noise_perlin(vec3(vPos*uStartDensity,uTime*3.))*2.*pi;\r\n  float f1=fbm_noise_perlin(vec3(vPos*uEndDensity,uTime*3.))*2.*pi;\r\n  vec2 move0=vStartRadius*mix(1.-uStartFixed,1.,swing)*vec2(cos(f0),sin(f0))*rotCoord(a-f0)/vSize.y;\r\n  vec2 move1=vEndRadius*mix(1.-uEndFixed,1.,swing)*vec2(cos(f1),sin(f1))*rotCoord(a-f1)/vSize.y;\r\n  coord+=abs(pp)*mix(move0,move1,gradual01);\r\n  //float len=smoothstep(1.,0.,length(mix(vec2(0.-.25,.5)*aspectRatio,vec2(1.+.25,.5)*aspectRatio,fract(uTime*.5))-coord)/2.);\r\n  color+=distLightLine(coord,startPos,endPos,r);\r\n  gl_FragColor=color;\r\n}"},6:function(t,n,r){var e=r(13),a=r(14),o=r(15),i=r(16);t.exports=function(t){return e(t)||a(t)||o(t)||i()}},64:function(t,n,r){"use strict";r.r(n);var e=r(6),a=r.n(e),o=r(7),i=r(0),u=r(1),c=r(48),f=r.n(c),s=r(49),l=r.n(s),d=function(t,n,r){var e=Object(i.f)(t,n,r);return{program:e,attribLocations:{vertexPosition:i.b.attribFloat(t,e,"aVertexPosition",2),textureCoord:i.b.attribFloat(t,e,"aTextureCoord",2)},uniformLocations:{projectionMatrix:i.i.uniformMatrix4fv(t,e,"uProjectionMatrix"),modelViewMatrix:i.i.uniformMatrix4fv(t,e,"uModelViewMatrix"),size:i.i.uniform2fv(t,e,"uSize")}}},v=function(t){return Object.assign(Object(i.h)(t,d,f.a,l.a),{draw:function(n){t.drawElements(t.TRIANGLES,n,t.UNSIGNED_INT,0)}})},h=r(50),m=r.n(h),b=r(51),p=r.n(b),g=function(t,n,r){var e=Object(i.f)(t,n,r);return{program:e,attribLocations:{vertexPosition:i.b.attribFloat(t,e,"aVertexPosition",2),textureCoord:i.b.attribFloat(t,e,"aTextureCoord",2)},uniformLocations:{projectionMatrix:i.i.uniformMatrix4fv(t,e,"uProjectionMatrix"),modelViewMatrix:i.i.uniformMatrix4fv(t,e,"uModelViewMatrix"),sampler:i.i.uniformTexture(t,e,"uSampler",0),mouse:i.i.uniform2fv(t,e,"uMouse"),length:i.i.uniform1f(t,e,"uLength"),time:i.i.uniform1f(t,e,"uTime"),startDensity:i.i.uniform1f(t,e,"uStartDensity"),endDensity:i.i.uniform1f(t,e,"uEndDensity"),startFixed:i.i.uniform1f(t,e,"uStartFixed"),endFixed:i.i.uniform1f(t,e,"uEndFixed"),startRadius:i.i.uniform1f(t,e,"uStartRadius"),endRadius:i.i.uniform1f(t,e,"uEndRadius"),lineWidth:i.i.uniform1f(t,e,"ulineWidth")}}},M=function(t){return Object.assign(Object(i.h)(t,g,m.a,p.a),{draw:function(n){t.drawElements(t.TRIANGLES,n,t.UNSIGNED_INT,0)}})},x=r(22);function y(t){var n=[[-1,-1],[1,-1],[1,1],[-1,1]].flat(),r=Object(i.a)(t,n,2),e=[[0,0],[1,0],[1,1],[0,1]].flat(),a=Object(i.a)(t,e,2),o=[[0,1,3],[1,2,3]].flat();return{positionBufferData:r,textureCoordinatesBufferData:a,indicesBufferData:Object(i.d)(t,o,Uint32Array)}}!function(){var t=document.querySelector("#glcanvas"),n={alpha:!1},r=t.getContext("webgl2",n);r||(r=t.getContext("webgl",n)||t.getContext("experimental-webgl",n),!1);if(!r)return void alert("無法初始化WebGL。您的瀏覽器或機器可能不支持它。");var e={modelShader:v(r),electricityModelShader:M(r)},c={model:y(r)},f={image:Object(i.g)(r,"../img/image.db6145ea7db04f6029e081a95be9a8f5.jpg")},s=[.5*r.canvas.width,.5*r.canvas.height],l=[r.canvas.clientWidth,r.canvas.clientHeight],d={},h=[];t.addEventListener("mousemove",(function(t){u.b.set(s,t.pageX,t.pageY)})),t.addEventListener("mousedown",(function(t){u.b.set(s,t.pageX,t.pageY);for(var n=0;n<100;n++)h.push(new x.a(s,2+14*Math.random(),2*Math.random()*Math.PI,50+50*Math.random(),2+3*Math.random()))})),function(t,n,r,e,a){a.framebufferTextures,a.size;var o=r.model,i=n.modelShader;i.attribSet({vertexPosition:o.positionBufferData.buffer,textureCoord:o.textureCoordinatesBufferData.buffer}),i.uniformSet({sampler:e.image});var u=r.model,c=n.electricityModelShader;c.attribSet({vertexPosition:u.positionBufferData.buffer,textureCoord:u.textureCoordinatesBufferData.buffer}),c.uniformSet({sampler:e.image})}(0,e,c,f,{framebufferTextures:d,size:l});var m=0;requestAnimationFrame((function t(n){var f=.001*(n-m);m=n,requestAnimationFrame(t),function(t,n,r,e,c){var f=c.now,s=c.delta,l=(c.framebufferTextures,c.mPos),d=(c.size,c.particles);d.forEach((function(t,n,r){t.update(s),t.lifespan<=0&&r.splice(n,1)})),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE);var v=o.a.create();o.a.ortho(v,0,t.canvas.clientWidth,t.canvas.clientHeight,0,.1,100),o.a.translate(v,v,[0,0,-1]);var h=o.a.create(),m=r.model,b=n.electricityModelShader;b.use(),b.uniformSet({projectionMatrix:v,mouse:l,time:.001*f}),Object(i.j)(t);var p=[100,100],g=[400,100],M=u.a.sub(g,p),x=u.a.getAngle(M);o.a.identity(h),o.a.translate(h,h,[].concat(a()(u.a.mix(p,g,.5)),[0])),o.a.rotateZ(h,h,x),b.uniformSet({modelViewMatrix:h,startDensity:.003,endDensity:.003,startFixed:1,endFixed:1,startRadius:60,endRadius:60,lineWidth:10,length:u.a.length(M)}),b.draw(m.indicesBufferData.length);var y=[250,100],R=[380,400],E=u.a.sub(R,y),T=u.a.getAngle(E);o.a.identity(h),o.a.translate(h,h,[].concat(a()(u.a.mix(y,R,.5)),[0])),o.a.rotateZ(h,h,T),b.uniformSet({modelViewMatrix:h,startDensity:.003,endDensity:.009,startFixed:0,endFixed:.8,startRadius:60,endRadius:20,lineWidth:5,length:u.a.length(E)}),b.draw(m.indicesBufferData.length);var S=[250,100],A=[250,400],w=u.a.sub(A,S),C=u.a.getAngle(w);o.a.identity(h),o.a.translate(h,h,[].concat(a()(u.a.mix(S,A,.5)),[0])),o.a.rotateZ(h,h,C),b.uniformSet({modelViewMatrix:h,startDensity:.003,endDensity:.009,startFixed:0,endFixed:0,startRadius:60,endRadius:20,lineWidth:5,length:u.a.length(w)}),b.draw(m.indicesBufferData.length);var F=[100,400],_=[400,400],P=u.a.sub(_,F),D=u.a.getAngle(P);o.a.identity(h),o.a.translate(h,h,[].concat(a()(u.a.mix(F,_,.5)),[0])),o.a.rotateZ(h,h,D),b.uniformSet({modelViewMatrix:h,startDensity:.009,endDensity:.009,startFixed:1,endFixed:1,startRadius:20,endRadius:20,lineWidth:5,length:u.a.length(P)}),b.draw(m.indicesBufferData.length);var L=r.model,U=n.modelShader;U.use(),U.uniformSet({projectionMatrix:v}),Object(i.j)(t,null,!1),d.forEach((function(t,n,r){var e=t.prevPos,i=t.pos,c=t.lifespan/t.maxlife*30,f=u.a.sub(i,e),s=u.a.getAngle(f);o.a.identity(h),o.a.translate(h,h,[].concat(a()(u.a.mix(e,i,.5)),[0])),o.a.rotateZ(h,h,s),U.uniformSet({modelViewMatrix:h,size:[u.a.length(f)+c,c]}),U.draw(L.indicesBufferData.length)}))}(r,e,c,0,{now:n,delta:f,mPos:s,framebufferTextures:d,size:l,particles:h})}))}()},7:function(t,n,r){"use strict";r.d(n,"a",(function(){return e}));var e={};r.r(e),r.d(e,"create",(function(){return i})),r.d(e,"clone",(function(){return u})),r.d(e,"copy",(function(){return c})),r.d(e,"fromValues",(function(){return f})),r.d(e,"set",(function(){return s})),r.d(e,"identity",(function(){return l})),r.d(e,"transpose",(function(){return d})),r.d(e,"invert",(function(){return v})),r.d(e,"adjoint",(function(){return h})),r.d(e,"determinant",(function(){return m})),r.d(e,"multiply",(function(){return b})),r.d(e,"translate",(function(){return p})),r.d(e,"scale",(function(){return g})),r.d(e,"rotate",(function(){return M})),r.d(e,"rotateX",(function(){return x})),r.d(e,"rotateY",(function(){return y})),r.d(e,"rotateZ",(function(){return R})),r.d(e,"fromTranslation",(function(){return E})),r.d(e,"fromScaling",(function(){return T})),r.d(e,"fromRotation",(function(){return S})),r.d(e,"fromXRotation",(function(){return A})),r.d(e,"fromYRotation",(function(){return w})),r.d(e,"fromZRotation",(function(){return C})),r.d(e,"fromRotationTranslation",(function(){return F})),r.d(e,"fromQuat2",(function(){return _})),r.d(e,"getTranslation",(function(){return P})),r.d(e,"getScaling",(function(){return D})),r.d(e,"getRotation",(function(){return L})),r.d(e,"fromRotationTranslationScale",(function(){return U})),r.d(e,"fromRotationTranslationScaleOrigin",(function(){return B})),r.d(e,"fromQuat",(function(){return j})),r.d(e,"frustum",(function(){return k})),r.d(e,"perspective",(function(){return O})),r.d(e,"perspectiveFromFieldOfView",(function(){return I})),r.d(e,"ortho",(function(){return W})),r.d(e,"lookAt",(function(){return N})),r.d(e,"targetTo",(function(){return z})),r.d(e,"str",(function(){return V})),r.d(e,"frob",(function(){return Y})),r.d(e,"add",(function(){return X})),r.d(e,"subtract",(function(){return G})),r.d(e,"multiplyScalar",(function(){return q})),r.d(e,"multiplyScalarAndAdd",(function(){return Z})),r.d(e,"exactEquals",(function(){return H})),r.d(e,"equals",(function(){return Q})),r.d(e,"mul",(function(){return K})),r.d(e,"sub",(function(){return $}));var a=1e-6,o="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function i(){var t=new o(16);return o!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function u(t){var n=new o(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function c(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function f(t,n,r,e,a,i,u,c,f,s,l,d,v,h,m,b){var p=new o(16);return p[0]=t,p[1]=n,p[2]=r,p[3]=e,p[4]=a,p[5]=i,p[6]=u,p[7]=c,p[8]=f,p[9]=s,p[10]=l,p[11]=d,p[12]=v,p[13]=h,p[14]=m,p[15]=b,p}function s(t,n,r,e,a,o,i,u,c,f,s,l,d,v,h,m,b){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=c,t[8]=f,t[9]=s,t[10]=l,t[11]=d,t[12]=v,t[13]=h,t[14]=m,t[15]=b,t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function d(t,n){if(t===n){var r=n[1],e=n[2],a=n[3],o=n[6],i=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[6]=n[9],t[7]=n[13],t[8]=e,t[9]=o,t[11]=n[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function v(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],f=n[7],s=n[8],l=n[9],d=n[10],v=n[11],h=n[12],m=n[13],b=n[14],p=n[15],g=r*u-e*i,M=r*c-a*i,x=r*f-o*i,y=e*c-a*u,R=e*f-o*u,E=a*f-o*c,T=s*m-l*h,S=s*b-d*h,A=s*p-v*h,w=l*b-d*m,C=l*p-v*m,F=d*p-v*b,_=g*F-M*C+x*w+y*A-R*S+E*T;return _?(_=1/_,t[0]=(u*F-c*C+f*w)*_,t[1]=(a*C-e*F-o*w)*_,t[2]=(m*E-b*R+p*y)*_,t[3]=(d*R-l*E-v*y)*_,t[4]=(c*A-i*F-f*S)*_,t[5]=(r*F-a*A+o*S)*_,t[6]=(b*x-h*E-p*M)*_,t[7]=(s*E-d*x+v*M)*_,t[8]=(i*C-u*A+f*T)*_,t[9]=(e*A-r*C-o*T)*_,t[10]=(h*R-m*x+p*g)*_,t[11]=(l*x-s*R-v*g)*_,t[12]=(u*S-i*w-c*T)*_,t[13]=(r*w-e*S+a*T)*_,t[14]=(m*M-h*y-b*g)*_,t[15]=(s*y-l*M+d*g)*_,t):null}function h(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],f=n[7],s=n[8],l=n[9],d=n[10],v=n[11],h=n[12],m=n[13],b=n[14],p=n[15];return t[0]=u*(d*p-v*b)-l*(c*p-f*b)+m*(c*v-f*d),t[1]=-(e*(d*p-v*b)-l*(a*p-o*b)+m*(a*v-o*d)),t[2]=e*(c*p-f*b)-u*(a*p-o*b)+m*(a*f-o*c),t[3]=-(e*(c*v-f*d)-u*(a*v-o*d)+l*(a*f-o*c)),t[4]=-(i*(d*p-v*b)-s*(c*p-f*b)+h*(c*v-f*d)),t[5]=r*(d*p-v*b)-s*(a*p-o*b)+h*(a*v-o*d),t[6]=-(r*(c*p-f*b)-i*(a*p-o*b)+h*(a*f-o*c)),t[7]=r*(c*v-f*d)-i*(a*v-o*d)+s*(a*f-o*c),t[8]=i*(l*p-v*m)-s*(u*p-f*m)+h*(u*v-f*l),t[9]=-(r*(l*p-v*m)-s*(e*p-o*m)+h*(e*v-o*l)),t[10]=r*(u*p-f*m)-i*(e*p-o*m)+h*(e*f-o*u),t[11]=-(r*(u*v-f*l)-i*(e*v-o*l)+s*(e*f-o*u)),t[12]=-(i*(l*b-d*m)-s*(u*b-c*m)+h*(u*d-c*l)),t[13]=r*(l*b-d*m)-s*(e*b-a*m)+h*(e*d-a*l),t[14]=-(r*(u*b-c*m)-i*(e*b-a*m)+h*(e*c-a*u)),t[15]=r*(u*d-c*l)-i*(e*d-a*l)+s*(e*c-a*u),t}function m(t){var n=t[0],r=t[1],e=t[2],a=t[3],o=t[4],i=t[5],u=t[6],c=t[7],f=t[8],s=t[9],l=t[10],d=t[11],v=t[12],h=t[13],m=t[14],b=t[15];return(n*i-r*o)*(l*b-d*m)-(n*u-e*o)*(s*b-d*h)+(n*c-a*o)*(s*m-l*h)+(r*u-e*i)*(f*b-d*v)-(r*c-a*i)*(f*m-l*v)+(e*c-a*u)*(f*h-s*v)}function b(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],f=n[6],s=n[7],l=n[8],d=n[9],v=n[10],h=n[11],m=n[12],b=n[13],p=n[14],g=n[15],M=r[0],x=r[1],y=r[2],R=r[3];return t[0]=M*e+x*u+y*l+R*m,t[1]=M*a+x*c+y*d+R*b,t[2]=M*o+x*f+y*v+R*p,t[3]=M*i+x*s+y*h+R*g,M=r[4],x=r[5],y=r[6],R=r[7],t[4]=M*e+x*u+y*l+R*m,t[5]=M*a+x*c+y*d+R*b,t[6]=M*o+x*f+y*v+R*p,t[7]=M*i+x*s+y*h+R*g,M=r[8],x=r[9],y=r[10],R=r[11],t[8]=M*e+x*u+y*l+R*m,t[9]=M*a+x*c+y*d+R*b,t[10]=M*o+x*f+y*v+R*p,t[11]=M*i+x*s+y*h+R*g,M=r[12],x=r[13],y=r[14],R=r[15],t[12]=M*e+x*u+y*l+R*m,t[13]=M*a+x*c+y*d+R*b,t[14]=M*o+x*f+y*v+R*p,t[15]=M*i+x*s+y*h+R*g,t}function p(t,n,r){var e,a,o,i,u,c,f,s,l,d,v,h,m=r[0],b=r[1],p=r[2];return n===t?(t[12]=n[0]*m+n[4]*b+n[8]*p+n[12],t[13]=n[1]*m+n[5]*b+n[9]*p+n[13],t[14]=n[2]*m+n[6]*b+n[10]*p+n[14],t[15]=n[3]*m+n[7]*b+n[11]*p+n[15]):(e=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],f=n[6],s=n[7],l=n[8],d=n[9],v=n[10],h=n[11],t[0]=e,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=c,t[6]=f,t[7]=s,t[8]=l,t[9]=d,t[10]=v,t[11]=h,t[12]=e*m+u*b+l*p+n[12],t[13]=a*m+c*b+d*p+n[13],t[14]=o*m+f*b+v*p+n[14],t[15]=i*m+s*b+h*p+n[15]),t}function g(t,n,r){var e=r[0],a=r[1],o=r[2];return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function M(t,n,r,e){var o,i,u,c,f,s,l,d,v,h,m,b,p,g,M,x,y,R,E,T,S,A,w,C,F=e[0],_=e[1],P=e[2],D=Math.hypot(F,_,P);return D<a?null:(F*=D=1/D,_*=D,P*=D,o=Math.sin(r),u=1-(i=Math.cos(r)),c=n[0],f=n[1],s=n[2],l=n[3],d=n[4],v=n[5],h=n[6],m=n[7],b=n[8],p=n[9],g=n[10],M=n[11],x=F*F*u+i,y=_*F*u+P*o,R=P*F*u-_*o,E=F*_*u-P*o,T=_*_*u+i,S=P*_*u+F*o,A=F*P*u+_*o,w=_*P*u-F*o,C=P*P*u+i,t[0]=c*x+d*y+b*R,t[1]=f*x+v*y+p*R,t[2]=s*x+h*y+g*R,t[3]=l*x+m*y+M*R,t[4]=c*E+d*T+b*S,t[5]=f*E+v*T+p*S,t[6]=s*E+h*T+g*S,t[7]=l*E+m*T+M*S,t[8]=c*A+d*w+b*C,t[9]=f*A+v*w+p*C,t[10]=s*A+h*w+g*C,t[11]=l*A+m*w+M*C,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function x(t,n,r){var e=Math.sin(r),a=Math.cos(r),o=n[4],i=n[5],u=n[6],c=n[7],f=n[8],s=n[9],l=n[10],d=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*a+f*e,t[5]=i*a+s*e,t[6]=u*a+l*e,t[7]=c*a+d*e,t[8]=f*a-o*e,t[9]=s*a-i*e,t[10]=l*a-u*e,t[11]=d*a-c*e,t}function y(t,n,r){var e=Math.sin(r),a=Math.cos(r),o=n[0],i=n[1],u=n[2],c=n[3],f=n[8],s=n[9],l=n[10],d=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a-f*e,t[1]=i*a-s*e,t[2]=u*a-l*e,t[3]=c*a-d*e,t[8]=o*e+f*a,t[9]=i*e+s*a,t[10]=u*e+l*a,t[11]=c*e+d*a,t}function R(t,n,r){var e=Math.sin(r),a=Math.cos(r),o=n[0],i=n[1],u=n[2],c=n[3],f=n[4],s=n[5],l=n[6],d=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a+f*e,t[1]=i*a+s*e,t[2]=u*a+l*e,t[3]=c*a+d*e,t[4]=f*a-o*e,t[5]=s*a-i*e,t[6]=l*a-u*e,t[7]=d*a-c*e,t}function E(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function T(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(t,n,r){var e,o,i,u=r[0],c=r[1],f=r[2],s=Math.hypot(u,c,f);return s<a?null:(u*=s=1/s,c*=s,f*=s,e=Math.sin(n),i=1-(o=Math.cos(n)),t[0]=u*u*i+o,t[1]=c*u*i+f*e,t[2]=f*u*i-c*e,t[3]=0,t[4]=u*c*i-f*e,t[5]=c*c*i+o,t[6]=f*c*i+u*e,t[7]=0,t[8]=u*f*i+c*e,t[9]=c*f*i-u*e,t[10]=f*f*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function A(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function C(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function F(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=e+e,c=a+a,f=o+o,s=e*u,l=e*c,d=e*f,v=a*c,h=a*f,m=o*f,b=i*u,p=i*c,g=i*f;return t[0]=1-(v+m),t[1]=l+g,t[2]=d-p,t[3]=0,t[4]=l-g,t[5]=1-(s+m),t[6]=h+b,t[7]=0,t[8]=d+p,t[9]=h-b,t[10]=1-(s+v),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function _(t,n){var r=new o(3),e=-n[0],a=-n[1],i=-n[2],u=n[3],c=n[4],f=n[5],s=n[6],l=n[7],d=e*e+a*a+i*i+u*u;return d>0?(r[0]=2*(c*u+l*e+f*i-s*a)/d,r[1]=2*(f*u+l*a+s*e-c*i)/d,r[2]=2*(s*u+l*i+c*a-f*e)/d):(r[0]=2*(c*u+l*e+f*i-s*a),r[1]=2*(f*u+l*a+s*e-c*i),r[2]=2*(s*u+l*i+c*a-f*e)),F(t,n,r),t}function P(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function D(t,n){var r=n[0],e=n[1],a=n[2],o=n[4],i=n[5],u=n[6],c=n[8],f=n[9],s=n[10];return t[0]=Math.hypot(r,e,a),t[1]=Math.hypot(o,i,u),t[2]=Math.hypot(c,f,s),t}function L(t,n){var r=new o(3);D(r,n);var e=1/r[0],a=1/r[1],i=1/r[2],u=n[0]*e,c=n[1]*a,f=n[2]*i,s=n[4]*e,l=n[5]*a,d=n[6]*i,v=n[8]*e,h=n[9]*a,m=n[10]*i,b=u+l+m,p=0;return b>0?(p=2*Math.sqrt(b+1),t[3]=.25*p,t[0]=(d-h)/p,t[1]=(v-f)/p,t[2]=(c-s)/p):u>l&&u>m?(p=2*Math.sqrt(1+u-l-m),t[3]=(d-h)/p,t[0]=.25*p,t[1]=(c+s)/p,t[2]=(v+f)/p):l>m?(p=2*Math.sqrt(1+l-u-m),t[3]=(v-f)/p,t[0]=(c+s)/p,t[1]=.25*p,t[2]=(d+h)/p):(p=2*Math.sqrt(1+m-u-l),t[3]=(c-s)/p,t[0]=(v+f)/p,t[1]=(d+h)/p,t[2]=.25*p),t}function U(t,n,r,e){var a=n[0],o=n[1],i=n[2],u=n[3],c=a+a,f=o+o,s=i+i,l=a*c,d=a*f,v=a*s,h=o*f,m=o*s,b=i*s,p=u*c,g=u*f,M=u*s,x=e[0],y=e[1],R=e[2];return t[0]=(1-(h+b))*x,t[1]=(d+M)*x,t[2]=(v-g)*x,t[3]=0,t[4]=(d-M)*y,t[5]=(1-(l+b))*y,t[6]=(m+p)*y,t[7]=0,t[8]=(v+g)*R,t[9]=(m-p)*R,t[10]=(1-(l+h))*R,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function B(t,n,r,e,a){var o=n[0],i=n[1],u=n[2],c=n[3],f=o+o,s=i+i,l=u+u,d=o*f,v=o*s,h=o*l,m=i*s,b=i*l,p=u*l,g=c*f,M=c*s,x=c*l,y=e[0],R=e[1],E=e[2],T=a[0],S=a[1],A=a[2],w=(1-(m+p))*y,C=(v+x)*y,F=(h-M)*y,_=(v-x)*R,P=(1-(d+p))*R,D=(b+g)*R,L=(h+M)*E,U=(b-g)*E,B=(1-(d+m))*E;return t[0]=w,t[1]=C,t[2]=F,t[3]=0,t[4]=_,t[5]=P,t[6]=D,t[7]=0,t[8]=L,t[9]=U,t[10]=B,t[11]=0,t[12]=r[0]+T-(w*T+_*S+L*A),t[13]=r[1]+S-(C*T+P*S+U*A),t[14]=r[2]+A-(F*T+D*S+B*A),t[15]=1,t}function j(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=r+r,u=e+e,c=a+a,f=r*i,s=e*i,l=e*u,d=a*i,v=a*u,h=a*c,m=o*i,b=o*u,p=o*c;return t[0]=1-l-h,t[1]=s+p,t[2]=d-b,t[3]=0,t[4]=s-p,t[5]=1-f-h,t[6]=v+m,t[7]=0,t[8]=d+b,t[9]=v-m,t[10]=1-f-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function k(t,n,r,e,a,o,i){var u=1/(r-n),c=1/(a-e),f=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(r+n)*u,t[9]=(a+e)*c,t[10]=(i+o)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*f,t[15]=0,t}function O(t,n,r,e,a){var o,i=1/Math.tan(n/2);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(o=1/(e-a),t[10]=(a+e)*o,t[14]=2*a*e*o):(t[10]=-1,t[14]=-2*e),t}function I(t,n,r,e){var a=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),i=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),c=2/(i+u),f=2/(a+o);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(i-u)*c*.5,t[9]=(a-o)*f*.5,t[10]=e/(r-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*r/(r-e),t[15]=0,t}function W(t,n,r,e,a,o,i){var u=1/(n-r),c=1/(e-a),f=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(n+r)*u,t[13]=(a+e)*c,t[14]=(i+o)*f,t[15]=1,t}function N(t,n,r,e){var o,i,u,c,f,s,d,v,h,m,b=n[0],p=n[1],g=n[2],M=e[0],x=e[1],y=e[2],R=r[0],E=r[1],T=r[2];return Math.abs(b-R)<a&&Math.abs(p-E)<a&&Math.abs(g-T)<a?l(t):(d=b-R,v=p-E,h=g-T,o=x*(h*=m=1/Math.hypot(d,v,h))-y*(v*=m),i=y*(d*=m)-M*h,u=M*v-x*d,(m=Math.hypot(o,i,u))?(o*=m=1/m,i*=m,u*=m):(o=0,i=0,u=0),c=v*u-h*i,f=h*o-d*u,s=d*i-v*o,(m=Math.hypot(c,f,s))?(c*=m=1/m,f*=m,s*=m):(c=0,f=0,s=0),t[0]=o,t[1]=c,t[2]=d,t[3]=0,t[4]=i,t[5]=f,t[6]=v,t[7]=0,t[8]=u,t[9]=s,t[10]=h,t[11]=0,t[12]=-(o*b+i*p+u*g),t[13]=-(c*b+f*p+s*g),t[14]=-(d*b+v*p+h*g),t[15]=1,t)}function z(t,n,r,e){var a=n[0],o=n[1],i=n[2],u=e[0],c=e[1],f=e[2],s=a-r[0],l=o-r[1],d=i-r[2],v=s*s+l*l+d*d;v>0&&(s*=v=1/Math.sqrt(v),l*=v,d*=v);var h=c*d-f*l,m=f*s-u*d,b=u*l-c*s;return(v=h*h+m*m+b*b)>0&&(h*=v=1/Math.sqrt(v),m*=v,b*=v),t[0]=h,t[1]=m,t[2]=b,t[3]=0,t[4]=l*b-d*m,t[5]=d*h-s*b,t[6]=s*m-l*h,t[7]=0,t[8]=s,t[9]=l,t[10]=d,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t}function V(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Y(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function X(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t[9]=n[9]+r[9],t[10]=n[10]+r[10],t[11]=n[11]+r[11],t[12]=n[12]+r[12],t[13]=n[13]+r[13],t[14]=n[14]+r[14],t[15]=n[15]+r[15],t}function G(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t[9]=n[9]-r[9],t[10]=n[10]-r[10],t[11]=n[11]-r[11],t[12]=n[12]-r[12],t[13]=n[13]-r[13],t[14]=n[14]-r[14],t[15]=n[15]-r[15],t}function q(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=n[11]*r,t[12]=n[12]*r,t[13]=n[13]*r,t[14]=n[14]*r,t[15]=n[15]*r,t}function Z(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t[9]=n[9]+r[9]*e,t[10]=n[10]+r[10]*e,t[11]=n[11]+r[11]*e,t[12]=n[12]+r[12]*e,t[13]=n[13]+r[13]*e,t[14]=n[14]+r[14]*e,t[15]=n[15]+r[15]*e,t}function H(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function Q(t,n){var r=t[0],e=t[1],o=t[2],i=t[3],u=t[4],c=t[5],f=t[6],s=t[7],l=t[8],d=t[9],v=t[10],h=t[11],m=t[12],b=t[13],p=t[14],g=t[15],M=n[0],x=n[1],y=n[2],R=n[3],E=n[4],T=n[5],S=n[6],A=n[7],w=n[8],C=n[9],F=n[10],_=n[11],P=n[12],D=n[13],L=n[14],U=n[15];return Math.abs(r-M)<=a*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(e-x)<=a*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(o-y)<=a*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(i-R)<=a*Math.max(1,Math.abs(i),Math.abs(R))&&Math.abs(u-E)<=a*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-T)<=a*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(f-S)<=a*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(s-A)<=a*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(l-w)<=a*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(d-C)<=a*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(v-F)<=a*Math.max(1,Math.abs(v),Math.abs(F))&&Math.abs(h-_)<=a*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(m-P)<=a*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(b-D)<=a*Math.max(1,Math.abs(b),Math.abs(D))&&Math.abs(p-L)<=a*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(g-U)<=a*Math.max(1,Math.abs(g),Math.abs(U))}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var K=b,$=G},8:function(t,n){t.exports=function(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}}});