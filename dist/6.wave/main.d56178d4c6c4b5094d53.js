!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=91)}({0:function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"h",(function(){return f})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return v})),n.d(t,"j",(function(){return d})),n.d(t,"i",(function(){return m})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return p})),n.d(t,"k",(function(){return g}));var r=function(e,t,n){var r=o(e,e.VERTEX_SHADER,t),a=o(e,e.FRAGMENT_SHADER,n),i=e.createProgram();return e.attachShader(i,r),e.attachShader(i,a),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)?i:(alert("無法初始化著色器程序: "+e.getProgramInfoLog(i)),null)},o=function(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(alert("編譯著色器時發生錯誤: "+e.getShaderInfoLog(r)),e.deleteShader(r),null)},a=function(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Float32Array,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.STATIC_DRAW,i=e.createBuffer(),u=0,f={buffer:i,get data(){return r},get length(){return r.length},set:function(t){r=new o(t),u=100*Math.ceil(r.length/n/100),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,u*n*4,a),e.bufferSubData(e.ARRAY_BUFFER,0,r)},add:function(t){var f=r.length,c=100*Math.floor(r.length/n/100);c>=u&&(u=c+100,e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,u*n*4,a),e.bufferSubData(e.ARRAY_BUFFER,0,r));var l=new o(f+n);l.set(r),r=l,this.item(f/n,t)},item:function(t,a){var u=new o(a);r.set(u,t*n),e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferSubData(e.ARRAY_BUFFER,t*n*4,u)},getItem:function(e){return Array.from(r.slice(e*n,(e+1)*n))}};return f.set(t),f},i=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uint8Array,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.STATIC_DRAW,a=e.createBuffer(),i=0,u=3,f={buffer:a,get data(){return n},get length(){return n.length},set:function(t){n=new r(t),i=100*Math.ceil(n.length/u/100),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.bufferData(e.ELEMENT_ARRAY_BUFFER,i*u*4,o),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,n)},add:function(t){var f=n.length,c=100*Math.floor(n.length/u/100);c>=i&&(i=c+100,e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.bufferData(e.ELEMENT_ARRAY_BUFFER,i*u*4,o),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,n));var l=new r(f+u);l.set(n),n=l,this.item(f/u,t)},item:function(t,o){var i=new r(o);n.set(i,t*u),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,t*u*4,i)},getItem:function(e){return Array.from(n.slice(e*u,(e+1)*u))}};return f.set(t),f},u=function(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),t},f=function(e,t){var n=u(e),r=new Image;return r.onload=function(){n.width=r.width,n.height=r.height,e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.bindTexture(e.TEXTURE_2D,null)},r.src=t,n},c=function(e,t,n,r){e.bindFramebuffer(e.FRAMEBUFFER,t),void 0!==n&&void 0!==r&&e.viewport(0,0,n,r)},l=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t?n?c(e,t.framebuffer,t.width,t.height):c(e,t.framebuffer):n?c(e,null,e.canvas.width,e.canvas.height):c(e,null)},s=function(e,t,n){var r={width:t||e.canvas.clientWidth,height:n||e.canvas.clientHeight},o=u(e);r.texture=o,e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,null);var a=e.createFramebuffer();return r.framebuffer=a,e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0),e.bindFramebuffer(e.FRAMEBUFFER,null),r},v={attribFloat:function(e,t,n,r){var o=e.getAttribLocation(t,n);return e.enableVertexAttribArray(o),function(t){e.bindBuffer(e.ARRAY_BUFFER,t),e.vertexAttribPointer(o,r,e.FLOAT,!1,0,0)}}},d={uniform1f:function(e,t,n){var r=e.getUniformLocation(t,n);return function(t){e.uniform1f(r,t)}},uniform1fv:function(e,t,n){var r=e.getUniformLocation(t,n);return function(t){e.uniform1fv(r,t)}},uniform2fv:function(e,t,n){var r=e.getUniformLocation(t,n);return function(t){e.uniform2fv(r,t)}},uniform3fv:function(e,t,n){var r=e.getUniformLocation(t,n);return function(t){e.uniform3fv(r,t)}},uniformTexture:function(e,t,n,r){var o=e.getUniformLocation(t,n);return function(t){e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,t),e.uniform1i(o,r)}},uniform1i:function(e,t,n){var r=e.getUniformLocation(t,n);return function(t){e.uniform1i(r,t)}},uniformMatrix4fv:function(e,t,n){var r=e.getUniformLocation(t,n);return function(t){e.uniformMatrix4fv(r,!1,t)}}},m=function(e,t,n,r,o){var a=t(e,n,r);return{programInfo:a,use:function(){e.useProgram(a.program)},attribSet:function(e){for(var t in e)a.attribLocations[t]&&a.attribLocations[t](e[t])},uniformSet:function(e){for(var t in e)a.uniformLocations[t]&&a.uniformLocations[t](e[t])},elementSet:function(t){e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t)}}},b=function(e){return[[e[0],e[1]],[e[2],e[1]],[e[2],e[3]],[e[0],e[3]]].flat()},p=function(e){return[[e[0],e[1]],[e[0],e[3]],[e[2],e[1]],[e[2],e[3]]].flat()},h=function(e){e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)},g=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];l(e,t,r),n&&h(e)}},1:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return v})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return g}));var r=n(2),o=n.n(r),a=n(4),i=n.n(a),u=n(5),f=n.n(u),c=n(3),l=function(){function e(){i()(this,e)}return f()(e,null,[{key:"zero",value:function(){return[0,0]}},{key:"clone",value:function(e){return o()(e)}},{key:"normalize",value:function(t){var n=e.length(t);return n?e.scale(t,1/n):t}},{key:"rotate",value:function(e,t){var n=Math.cos(t),r=Math.sin(t);return[e[0]*n-e[1]*r,e[1]*n+e[0]*r]}},{key:"dot",value:function(e,t){return e[0]*t[0]+e[1]*t[1]}},{key:"cross",value:function(e,t){return e[0]*t[1]-e[1]*t[0]}},{key:"add",value:function(e,t){return[e[0]+t[0],e[1]+t[1]]}},{key:"sub",value:function(e,t){return[e[0]-t[0],e[1]-t[1]]}},{key:"projection",value:function(t,n){var r=e.dot(t,n)/e.dot(n,n);return[n[0]*r,n[1]*r]}},{key:"length",value:function(t){return Math.sqrt(e.dot(t,t))}},{key:"mul",value:function(e,t){return[e[0]*t[0],e[1]*t[1]]}},{key:"div",value:function(e,t){return[e[0]/t[0],e[1]/t[1]]}},{key:"scale",value:function(e,t){return[e[0]*t,e[1]*t]}},{key:"collisionCalc",value:function(t,n,r,o){return e.scale(e.add(e.scale(t,r-o),e.scale(n,2*o)),1/(r+o))}},{key:"getAngle",value:function(e){return Math.atan2(e[1],e[0])}},{key:"floor",value:function(e){return[Math.floor(e[0]),Math.floor(e[1])]}},{key:"fract",value:function(e){return[c.a.fract(e[0]),c.a.fract(e[1])]}},{key:"sin",value:function(e){return[Math.sin(e[0]),Math.sin(e[1])]}},{key:"cos",value:function(e){return[Math.cos(e[0]),Math.cos(e[1])]}},{key:"distance",value:function(t,n){return e.length(e.sub(n,t))}},{key:"mix",value:function(e,t,n){return[c.a.mix(e[0],t[0],n),c.a.mix(e[1],t[1],n)]}},{key:"abs",value:function(e){return[Math.abs(e[0]),Math.abs(e[1])]}}]),e}(),s=function(){function e(){i()(this,e)}return f()(e,null,[{key:"set",value:function(e,t,n){return e[0]=t,e[1]=n,e}},{key:"normalize",value:function(t){var n=l.length(t);return n&&e.scale(t,1/n),t}},{key:"add",value:function(e,t){return e[0]+=t[0],e[1]+=t[1],e}},{key:"sub",value:function(e,t){return e[0]-=t[0],e[1]-=t[1],e}},{key:"scale",value:function(e,t){return e[0]*=t,e[1]*=t,e}},{key:"rotate",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),o=[e[0]*n-e[1]*r,e[1]*n+e[0]*r];return e[0]=o[0],e[1]=o[1],e}}]),e}(),v=function(){function e(){i()(this,e)}return f()(e,null,[{key:"doLineSegmentsIntersect",value:function(e,t,n,r){function o(e,t,n){var r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return 0===r?0:r>0?1:2}function a(e,t,n){return t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1])}var i=o(e,t,n),u=o(e,t,r),f=o(n,r,e),c=o(n,r,t);return i!==u&&f!==c||(!(0!==i||!a(e,n,t))||(!(0!==u||!a(e,r,t))||(!(0!==f||!a(n,e,r))||!(0!==c||!a(n,t,r)))))}},{key:"getLine",value:function(e,t){return{pos:e,dir:l.sub(t,e)}}},{key:"toLineDistance",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=l.sub(n,t),a=o[1],i=-o[0],u=-t[0]*o[1]+o[0]*t[1],f=(e[0]*a+e[1]*i+u)/l.length(o);return r?f:Math.abs(f)}}]),e}(),d=function(e,t,n,r){var o=r*r;return[e[0]*(o-2*r+1)+2*t[0]*(1-r)*r+n[0]*o,e[1]*(o-2*r+1)+2*t[1]*(1-r)*r+n[1]*o]},m=function(e,t,n,r){return[2*r*(e[0]-2*t[0]+n[0])+2*(-e[0]+t[0]),2*r*(e[1]-2*t[1]+n[1])+2*(-e[1]+t[1])]},b=function(e,t,n,r,o){var a=o*o,i=o*o*o;return[e[0]*(3*a-i-3*o+1)+t[0]*(3*i-6*a+3*o)+n[0]*(-3*i+3*a)+r[0]*i,e[1]*(3*a-i-3*o+1)+t[1]*(3*i-6*a+3*o)+n[1]*(-3*i+3*a)+r[1]*i]},p=function(e,t,n,r,o){var a=o*o;return[-3*e[0]+3*t[0]+2*o*(3*e[0]-6*t[0]+3*n[0])+3*a*(-e[0]+3*t[0]-3*n[0]+r[0]),-3*e[1]+3*t[1]+2*o*(3*e[1]-6*t[1]+3*n[1])+3*a*(-e[1]+3*t[1]-3*n[1]+r[1])]},h=function(e,t,n,r){for(var o=[],a=[],i=null,u=0;u<r;u++){var f=u/(r-1),c=d(e,t,n,f),s=l.normalize(m(e,t,n,f));o.push({p:c,t:s,n:[-s[1],s[0]]}),i&&a.push(l.distance(c,i)),i=c}var v=a.reduce((function(e,t){return e+t}));return{points:o,section:a,length:v}},g=function(e,t,n,r,o){for(var a=[],i=[],u=null,f=0;f<o;f++){var c=f/(o-1),s=b(e,t,n,r,c),v=l.normalize(p(e,t,n,r,c));a.push({p:s,t:v,n:[-v[1],v[0]]}),u&&i.push(l.distance(s,u)),u=s}var d=i.reduce((function(e,t){return e+t}));return{points:a,section:i,length:d}}},11:function(e,t,n){var r=n(8);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},12:function(e,t,n){var r=n(8);e.exports=function(e){if(Array.isArray(e))return r(e)}},13:function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},14:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},19:function(e,t){e.exports="precision highp float;\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nvoid main()\n{\n  gl_FragColor=texture2D(uSampler,vTextureCoord);\n}\n"},2:function(e,t,n){var r=n(12),o=n(13),a=n(11),i=n(14);e.exports=function(e){return r(e)||o(e)||a(e)||i()}},21:function(e,t,n){"use strict";var r=n(0),o=n(6),a=n.n(o),i=n(19),u=n.n(i),f=function(e,t,n){var o=Object(r.g)(e,t,n);return{program:o,attribLocations:{vertexPosition:r.b.attribFloat(e,o,"aVertexPosition",2),textureCoord:r.b.attribFloat(e,o,"aTextureCoord",2)},uniformLocations:{flipY:r.j.uniform1f(e,o,"uFlipY"),sampler:r.j.uniformTexture(e,o,"uSampler",0)}}};t.a=function(e){return Object.assign(Object(r.i)(e,f,a.a,u.a),{draw:function(t){e.drawElements(e.TRIANGLES,t,e.UNSIGNED_BYTE,0)}})}},3:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(4),o=n.n(r),a=n(5),i=n.n(a),u=function(){function e(){o()(this,e)}return i()(e,null,[{key:"mix",value:function(e,t,n){return e*(1-n)+t*n}},{key:"fract",value:function(e){return(e%=1)<0?e+1:e}},{key:"inverseMix",value:function(e,t,n){return(n-e)/(t-e)}},{key:"clamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<=t?t:e>=n?n:e}},{key:"smoothstep",value:function(e,t,n){return(n=clamp(inverseMix(e,t,n)))*n*(3-2*n)}}]),e}()},4:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},45:function(e,t){e.exports="precision highp float;\nvarying vec2 vTextureCoord;\nuniform lowp vec2 uSize;\nuniform float uTime;\nconst float pi=3.14159265359;\nvoid main()\n{\n  vec2 coord=vTextureCoord*uSize;\n  float a=sin(uTime*.003+(coord.x/200.)*2.*pi+.5*pi+sin(uTime*.012+pi*coord.x/50.)*.25+exp(sin(uTime*.012+pi*coord.x/50.))*.25+sin(pi*coord.y/100.)*1.6);\n  a=pow(exp(2.*a)/exp(2.),.75);\n  gl_FragColor=vec4(vec3(a),1.);\n  \n  /*vec2 uv0=2.*vTextureCoord-1.;\n  float c=0.;\n  c+=abs(1./sin(uv0.y+sin(uv0.x*10.+uTime*.012)))/100.;\n  gl_FragColor+=vec4(vec3(c),1.);*/\n}\n\n"},46:function(e,t){e.exports="precision highp float;\nvarying vec2 vTextureCoord;\nuniform lowp vec2 uSize;\nuniform sampler2D uSampler;\nuniform float uHeight;\nconst float pi=3.14159265359;\nvoid main()\n{\n  vec2 iResolution=uSize/2.;\n  vec4 texCol=texture2D(uSampler,vTextureCoord);\n  vec2 dir=vec2(0.);\n  const int N=8;\n  float w=0.;\n  for(int i=0;i<N;i++)\n  {\n    float angle=2.*pi*float(i)/float(N);\n    vec2 pos=vec2(cos(angle),sin(angle));\n    dir+=(texCol.r-texture2D(uSampler,vTextureCoord+pos/iResolution).r)*pos;\n    w+=1.;\n  }\n  dir/=w;\n  dir*=vec2(1.,-1.);\n  vec3 normal=normalize(vec3(min(uHeight,200.)*dir,-1));\n  gl_FragColor=vec4(normal.xy*.5+vec2(.5),uHeight*texCol.r/200.,1.);\n  \n}\n"},47:function(e,t){e.exports="precision highp float;\nvarying vec2 vTextureCoord;\nuniform lowp vec2 uSize;\nuniform sampler2D uNormalSampler;\nuniform sampler2D uSampler;\nuniform float uRefractiveIndex;\nuniform float uDistance;\n\nvoid main()\n{\n  vec4 texCol=texture2D(uNormalSampler,vTextureCoord);\n  vec2 pos=(2.*texCol.rg-vec2(1.));\n  pos.x*=-1.;\n  vec3 refract=refract(vec3(0.,0.,1.),normalize(vec3(pos,-1.)),uRefractiveIndex);\n  refract*=(texCol.b*200.+uDistance)/refract.z;\n  vec4 texCol00=texture2D(uSampler,vTextureCoord+refract.xy/uSize);\n  gl_FragColor=texCol00;\n}\n"},5:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},6:function(e,t){e.exports="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying highp vec2 vTextureCoord;\nuniform float uFlipY;\nvoid main(void){\n  vTextureCoord=aTextureCoord;\n  gl_Position=vec4((2.*aVertexPosition+vec2(-1.,-1.))*vec2(1.,uFlipY),0.,1.);\n}"},8:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},91:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=n(0),i=n(1),u=n(6),f=n.n(u),c=n(45),l=n.n(c),s=function(e,t,n){var r=Object(a.g)(e,t,n);return{program:r,attribLocations:{vertexPosition:a.b.attribFloat(e,r,"aVertexPosition",2),textureCoord:a.b.attribFloat(e,r,"aTextureCoord",2)},uniformLocations:{flipY:a.j.uniform1f(e,r,"uFlipY"),time:a.j.uniform1f(e,r,"uTime"),size:a.j.uniform2fv(e,r,"uSize")}}},v=function(e){return Object.assign(Object(a.i)(e,s,f.a,l.a),{draw:function(t){e.drawElements(e.TRIANGLES,t,e.UNSIGNED_BYTE,0)}})},d=n(46),m=n.n(d),b=function(e,t,n){var r=Object(a.g)(e,t,n);return{program:r,attribLocations:{vertexPosition:a.b.attribFloat(e,r,"aVertexPosition",2),textureCoord:a.b.attribFloat(e,r,"aTextureCoord",2)},uniformLocations:{flipY:a.j.uniform1f(e,r,"uFlipY"),size:a.j.uniform2fv(e,r,"uSize"),sampler:a.j.uniformTexture(e,r,"uSampler",0),height:a.j.uniform1f(e,r,"uHeight")}}},p=function(e){return Object.assign(Object(a.i)(e,b,f.a,m.a),{draw:function(t){e.drawElements(e.TRIANGLES,t,e.UNSIGNED_BYTE,0)}})},h=n(47),g=n.n(h),x=function(e,t,n){var r=Object(a.g)(e,t,n);return{program:r,attribLocations:{vertexPosition:a.b.attribFloat(e,r,"aVertexPosition",2),textureCoord:a.b.attribFloat(e,r,"aTextureCoord",2)},uniformLocations:{flipY:a.j.uniform1f(e,r,"uFlipY"),size:a.j.uniform2fv(e,r,"uSize"),normalSampler:a.j.uniformTexture(e,r,"uNormalSampler",0),sampler:a.j.uniformTexture(e,r,"uSampler",1),refractiveIndex:a.j.uniform1f(e,r,"uRefractiveIndex"),distance:a.j.uniform1f(e,r,"uDistance")}}},E=function(e){return Object.assign(Object(a.i)(e,x,f.a,g.a),{draw:function(t){e.drawElements(e.TRIANGLES,t,e.UNSIGNED_BYTE,0)}})},T=n(21);function R(e){var t=[[0,0],[1,0],[1,1],[0,1]].flat(),n=Object(a.a)(e,t,2),r=[[0,0],[1,0],[1,1],[0,1]].flat(),o=Object(a.a)(e,r,2),i=[[0,1,3],[1,2,3]].flat();return{positionBufferData:n,textureCoordinatesBufferData:o,indicesBufferData:Object(a.d)(e,i)}}!function(){var e=document.querySelector("#glcanvas"),t=e.getContext("webgl",{alpha:!1});if(!t)return void alert("無法初始化WebGL。您的瀏覽器或機器可能不支持它。");var n={waveShader:v(t),normalShader:p(t),refractShader:E(t),viewShader:Object(T.a)(t)},r={face:R(t),view:R(t)},o={image:Object(a.h)(t,"../img/image.7826b8fad510e7131700fc463cce2c7c.jpg")},u=[.5*t.canvas.width,.5*t.canvas.height];e.addEventListener("mousemove",(function(e){i.c.set(u,e.pageX,e.pageY)}));var f=[t.canvas.clientWidth,t.canvas.clientHeight],c={wave:Object(a.c)(t),normal:Object(a.c)(t),refract:Object(a.c)(t)},l=0;requestAnimationFrame((function e(s){var v=.001*(s-l);l=s,requestAnimationFrame(e),function(e,t,n,r,o){var u=o.now,f=o.framebufferTextures,c=o.mPos,l=o.size,s=n.face,v=t.waveShader;v.use(),v.attribSet({vertexPosition:s.positionBufferData.buffer,textureCoord:s.textureCoordinatesBufferData.buffer}),v.uniformSet({size:l,flipY:1,time:u}),Object(a.k)(e,f.wave),v.draw(s.indicesBufferData.length);var d=n.face,m=t.normalShader;m.use(),m.attribSet({vertexPosition:d.positionBufferData.buffer,textureCoord:d.textureCoordinatesBufferData.buffer}),m.uniformSet({size:l,flipY:1,sampler:f.wave.texture,height:20}),Object(a.k)(e,f.normal),m.draw(d.indicesBufferData.length);var b=n.face,p=t.refractShader;p.use(),p.attribSet({vertexPosition:b.positionBufferData.buffer,textureCoord:b.textureCoordinatesBufferData.buffer}),p.uniformSet({size:l,flipY:1,sampler:r.image,normalSampler:f.normal.texture,refractiveIndex:1.33,distance:1e3}),Object(a.k)(e,f.refract),p.draw(b.indicesBufferData.length);var h=i.b.div(c,l),g=n.view,x=t.viewShader;x.use(),x.attribSet({vertexPosition:g.positionBufferData.buffer,textureCoord:g.textureCoordinatesBufferData.buffer}),x.uniformSet({flipY:-1}),Object(a.k)(e);var E=[h[0],0,1,h[1]],T=[[E[0],E[1]],[E[2],E[1]],[E[2],E[3]],[E[0],E[3]]].flat();g.positionBufferData.set(T),g.textureCoordinatesBufferData.set(T),x.uniformSet({sampler:f.wave.texture}),x.draw(g.indicesBufferData.length);var R=[h[0],h[1],1,1],S=[[R[0],R[1]],[R[2],R[1]],[R[2],R[3]],[R[0],R[3]]].flat();g.positionBufferData.set(S),g.textureCoordinatesBufferData.set(S),x.uniformSet({sampler:f.normal.texture}),x.draw(g.indicesBufferData.length);var y=[0,0,h[0],1],A=[[y[0],y[1]],[y[2],y[1]],[y[2],y[3]],[y[0],y[3]]].flat();g.positionBufferData.set(A),g.textureCoordinatesBufferData.set(A),x.uniformSet({sampler:f.refract.texture}),x.draw(g.indicesBufferData.length)}(t,n,r,o,{now:s,delta:v,mPos:u,framebufferTextures:c,size:f})}))}(),function(){var e=document.getElementById("canvas").getContext("2d");e.lineWidth=1;e.strokeStyle="#ff0000",e.beginPath();for(var t=0;t<800;t++){var n=t/400*2*Math.PI+.5*Math.PI,r=[Math.cos(n),Math.sin(n)];i.c.scale(r,40);var a=i.b.add([t,100],r);0===t?e.moveTo.apply(e,o()(a)):e.lineTo.apply(e,o()(a))}e.stroke(),e.strokeStyle="#000000",e.beginPath();for(var u=0;u<800;u++){var f=u/400*2*Math.PI+.5*Math.PI,c=i.b.add([u,100],[0,40*Math.sin(f-.5*Math.cos(f))]);0===u?e.moveTo.apply(e,o()(c)):e.lineTo.apply(e,o()(c))}e.stroke(),e.strokeStyle="#0000ff",e.beginPath(),e.moveTo(0,100),e.lineTo(800,100),e.stroke()}()}});