!function(e){var t={};function r(n){if(t[n])return t[n].exports;var u=t[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,r),u.l=!0,u.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var u in e)r.d(n,u,function(t){return e[t]}.bind(null,u));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=44)}({0:function(e,t,r){"use strict";r.d(t,"e",(function(){return n})),r.d(t,"g",(function(){return c})),r.d(t,"h",(function(){return l})),r.d(t,"b",(function(){return v})),r.d(t,"c",(function(){return d})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return a})),r.d(t,"f",(function(){return f}));var n=function(e,t,r){var n=u(e,e.VERTEX_SHADER,t),o=u(e,e.FRAGMENT_SHADER,r),a=e.createProgram();return e.attachShader(a,n),e.attachShader(a,o),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)?a:(alert("無法初始化著色器程序: "+e.getProgramInfoLog(a)),null)},u=function(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(alert("編譯著色器時發生錯誤: "+e.getShaderInfoLog(n)),e.deleteShader(n),null)},o=function(e,t,r){var n,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.STATIC_DRAW,o=e.createBuffer(),a=0,i={buffer:o,get data(){return n},get length(){return n.length},set:function(t){n=new Float32Array(t),a=100*Math.ceil(n.length/r/100),e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,a*r*4,u),e.bufferSubData(e.ARRAY_BUFFER,0,n)},add:function(t){var i=n.length,f=100*Math.floor(n.length/r/100);f>=a&&(a=f+100,e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,a*r*4,u),e.bufferSubData(e.ARRAY_BUFFER,0,n));var c=new Float32Array(i+r);c.set(n),n=c,this.item(i/r,t)},item:function(t,u){var a=new Float32Array(u);n.set(a,t*r),e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferSubData(e.ARRAY_BUFFER,t*r*4,a)},getItem:function(e){return Array.from(n.slice(e*r,(e+1)*r))}};return i.set(t),i},a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.STATIC_DRAW,n=new Uint8Array(t),u=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u),e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,r);var o={buffer:u,get data(){return n},get length(){return n.length}};return o},i=function(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),t},f=function(e,t){var r=i(e),n=new Image;return n.onload=function(){e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)},n.src=t,r},c=function(e,t,r,n){e.bindFramebuffer(e.FRAMEBUFFER,t),e.viewport(0,0,r,n)},l=function(e,t){c(e,t.framebuffer,t.width,t.height)},v=function(e,t,r){var n={width:t||e.canvas.clientWidth,height:r||e.canvas.clientHeight},u=i(e);n.texture=u,e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,null);var o=e.createFramebuffer();return n.framebuffer=o,e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,u,0),e.bindFramebuffer(e.FRAMEBUFFER,null),n},d=function(e,t,r,n){for(var u=[],o=0;o<t;o++)u.push(v(e,r,n));return e.bindFramebuffer(e.FRAMEBUFFER,null),u}},1:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},2:function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},3:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"b",(function(){return c}));var n=r(1),u=r.n(n),o=r(2),a=r.n(o),i=r(4),f=function(){function e(){u()(this,e)}return a()(e,null,[{key:"toPosRate",value:function(e,t,r){return[e[0]*(1-r)+t[0]*r,e[1]*(1-r)+t[1]*r]}},{key:"cross",value:function(e,t,r){return(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1])}},{key:"getCenter",value:function(e,t){return[.5*(e[0]+t[0]),.5*(e[1]+t[1])]}},{key:"getVector",value:function(e,t){return[t[0]-e[0],t[1]-e[1]]}},{key:"addVector",value:function(e,t){return[e[0]+t[0],e[1]+t[1]]}},{key:"distance",value:function(t,r){return i.a.length(e.getVector(t,r))}},{key:"getLine",value:function(t,r){return{point:t,vector:e.getVector(t,r)}}}]),e}(),c=function(){function e(){u()(this,e)}return a()(e,null,[{key:"set",value:function(e,t,r){return e[0]=t,e[1]=r,e}},{key:"addVector",value:function(e,t){return e[0]+=t[0],e[1]+=t[1],e}}]),e}()},39:function(e,t){e.exports="attribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\nvarying highp vec2 vTextureCoord;\r\nuniform float uFlipY;\r\nvoid main(void){\r\n  vTextureCoord=aTextureCoord;\r\n  gl_Position=vec4((2.*aVertexPosition+vec2(-1.,-1.))*vec2(1.,uFlipY),0.,1.);\r\n}"},4:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return f}));var n=r(1),u=r.n(n),o=r(2),a=r.n(o),i=function(){function e(){u()(this,e)}return a()(e,null,[{key:"normalize",value:function(t){return e.length(t)?e.scale(t,1/e.length(t)):t}},{key:"rotate",value:function(e,t){var r=Math.cos(t),n=Math.sin(t);return[e[0]*r-e[1]*n,e[1]*r+e[0]*n]}},{key:"dot",value:function(e,t){return e[0]*t[0]+e[1]*t[1]}},{key:"cross",value:function(e,t){return e[0]*t[1]-e[1]*t[0]}},{key:"add",value:function(e,t){return[e[0]+t[0],e[1]+t[1]]}},{key:"sub",value:function(e,t){return[e[0]-t[0],e[1]-t[1]]}},{key:"projection",value:function(t,r){var n=e.dot(t,r)/e.dot(r,r);return[r[0]*n,r[1]*n]}},{key:"length",value:function(t){return Math.sqrt(e.dot(t,t))}},{key:"scale",value:function(e,t){return[e[0]*t,e[1]*t]}},{key:"collisionCalc",value:function(t,r,n,u){return e.scale(e.add(e.scale(t,n-u),e.scale(r,2*u)),1/(n+u))}},{key:"getAngle",value:function(e){return Math.atan2(e[1],e[0])}}]),e}(),f=function(){function e(){u()(this,e)}return a()(e,null,[{key:"set",value:function(e,t,r){return e[0]=t,e[1]=r,e}},{key:"normalize",value:function(t){var r=i.length(t);return r&&e.scale(t,1/r),t}},{key:"add",value:function(e,t){return e[0]+=t[0],e[1]+=t[1],e}},{key:"sub",value:function(e,t){return e[0]-=t[0],e[1]-=t[1],e}},{key:"scale",value:function(e,t){return e[0]*=t,e[1]*=t,e}},{key:"rotate",value:function(e,t){var r=Math.cos(t),n=Math.sin(t),u=[e[0]*r-e[1]*n,e[1]*r+e[0]*n];return e[0]=u[0],e[1]=u[1],e}}]),e}()},40:function(e,t){e.exports="precision mediump float;\r\nvarying vec2 vTextureCoord;\r\nuniform lowp vec2 uSize;\r\nuniform float uTime;\r\nconst float pi=3.14159;\r\nfloat wave(vec2 c,float uTime,float xF,float yF,float yF0,float o,float r){\r\n  return sin(uTime*.003+pi*xF+sin(uTime*.001+pi*yF+pi*o)*.25+sin(pi*yF0)*r);\r\n}\r\nvoid main()\r\n{\r\n  vec2 c=vTextureCoord*uSize;\r\n  float rate=1.-abs(wave(c,uTime,c.x*.005,c.y*.004,c.y*.005,c.x*.008,.8));\r\n  gl_FragColor=vec4(vec3(rate),1.);\r\n}\r\n"},44:function(e,t,r){"use strict";r.r(t);var n=r(0),u=r(3);function o(e,t,r){var u,o=Object(n.e)(e,t,r);return{program:o,attribLocations:{vertexPosition:(u=e.getAttribLocation(o,"aVertexPosition"),e.enableVertexAttribArray(u),function(t){e.bindBuffer(e.ARRAY_BUFFER,t),e.vertexAttribPointer(u,2,e.FLOAT,!1,0,0)}),textureCoord:function(){var t=e.getAttribLocation(o,"aTextureCoord");return e.enableVertexAttribArray(t),function(r){e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(t,2,e.FLOAT,!1,0,0)}}()},uniformLocations:{flipY:function(){var t=e.getUniformLocation(o,"uFlipY");return function(r){e.uniform1f(t,r)}}(),time:function(){var t=e.getUniformLocation(o,"uTime");return function(r){e.uniform1f(t,r)}}(),size:function(){var t=e.getUniformLocation(o,"uSize");return function(r){e.uniform2fv(t,r)}}()}}}function a(e){var t=[[0,0],[1,0],[1,1],[0,1]].flat(),r=Object(n.a)(e,t,2),u=[[0,0],[1,0],[1,1],[0,1]].flat(),o=Object(n.a)(e,u,2),a=[[0,1,3],[1,2,3]].flat();return{positionBufferData:r,textureCoordinatesBufferData:o,indicesBufferData:Object(n.d)(e,a)}}!function(){var e=document.querySelector("#glcanvas"),t=e.getContext("webgl");if(!t)return void alert("無法初始化WebGL。您的瀏覽器或機器可能不支持它。");var i={waveShader:o(t,r(39),r(40))},f={face:a(t)},c=(Object(n.f)(t,"../img/image.7826b8fad510e7131700fc463cce2c7c.jpg"),[0,0]);e.addEventListener("mousemove",(function(e){u.b.set(c,e.pageX,e.pageY)}));var l={},v=Object(n.c)(t,2),d=0;requestAnimationFrame((function e(r){var n=.001*(r-d);d=r,requestAnimationFrame(e),function(e,t,r,n,u){var o=u.now,a=[e.canvas.clientWidth,e.canvas.clientHeight],i=r.face,f=t.waveShader;e.useProgram(f.program),f.attribLocations.vertexPosition(i.positionBufferData.buffer),f.attribLocations.textureCoord(i.textureCoordinatesBufferData.buffer),f.uniformLocations.time(o),f.uniformLocations.size(a),e.clearColor(0,0,0,.1),e.clear(e.COLOR_BUFFER_BIT),f.uniformLocations.flipY(-1),e.drawElements(e.TRIANGLE_STRIP,i.indicesBufferData.length,e.UNSIGNED_BYTE,0)}(t,i,f,0,{now:r,delta:n,mPos:c,framebufferTextures:l,tempFramebufferTextures:v})}))}()}});