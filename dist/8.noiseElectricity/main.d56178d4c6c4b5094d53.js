!function(n){var e={};function t(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return n[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var a in n)t.d(r,a,function(e){return n[e]}.bind(null,a));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=92)}({0:function(n,e,t){"use strict";t.d(e,"g",(function(){return r})),t.d(e,"a",(function(){return o})),t.d(e,"d",(function(){return i})),t.d(e,"h",(function(){return f})),t.d(e,"c",(function(){return s})),t.d(e,"b",(function(){return d})),t.d(e,"j",(function(){return v})),t.d(e,"i",(function(){return p})),t.d(e,"e",(function(){return m})),t.d(e,"f",(function(){return h})),t.d(e,"k",(function(){return b}));var r=function(n,e,t){var r=a(n,n.VERTEX_SHADER,e),o=a(n,n.FRAGMENT_SHADER,t),i=n.createProgram();return n.attachShader(i,r),n.attachShader(i,o),n.linkProgram(i),n.getProgramParameter(i,n.LINK_STATUS)?i:(alert("無法初始化著色器程序: "+n.getProgramInfoLog(i)),null)},a=function(n,e,t){var r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS)?r:(alert("編譯著色器時發生錯誤: "+n.getShaderInfoLog(r)),n.deleteShader(r),null)},o=function(n,e,t){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Float32Array,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.STATIC_DRAW,i=n.createBuffer(),u=0,f={buffer:i,get data(){return r},get length(){return r.length},set:function(e){r=new a(e),u=100*Math.ceil(r.length/t/100),n.bindBuffer(n.ARRAY_BUFFER,i),n.bufferData(n.ARRAY_BUFFER,u*t*4,o),n.bufferSubData(n.ARRAY_BUFFER,0,r)},add:function(e){var f=r.length,c=100*Math.floor(r.length/t/100);c>=u&&(u=c+100,n.bindBuffer(n.ARRAY_BUFFER,i),n.bufferData(n.ARRAY_BUFFER,u*t*4,o),n.bufferSubData(n.ARRAY_BUFFER,0,r));var l=new a(f+t);l.set(r),r=l,this.item(f/t,e)},item:function(e,o){var u=new a(o);r.set(u,e*t),n.bindBuffer(n.ARRAY_BUFFER,i),n.bufferSubData(n.ARRAY_BUFFER,e*t*4,u)},getItem:function(n){return Array.from(r.slice(n*t,(n+1)*t))}};return f.set(e),f},i=function(n,e){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uint8Array,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.STATIC_DRAW,o=n.createBuffer(),i=0,u=3,f={buffer:o,get data(){return t},get length(){return t.length},set:function(e){t=new r(e),i=100*Math.ceil(t.length/u/100),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o),n.bufferData(n.ELEMENT_ARRAY_BUFFER,i*u*4,a),n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,t)},add:function(e){var f=t.length,c=100*Math.floor(t.length/u/100);c>=i&&(i=c+100,n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o),n.bufferData(n.ELEMENT_ARRAY_BUFFER,i*u*4,a),n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,t));var l=new r(f+u);l.set(t),t=l,this.item(f/u,e)},item:function(e,a){var i=new r(a);t.set(i,e*u),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o),n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,e*u*4,i)},getItem:function(n){return Array.from(t.slice(n*u,(n+1)*u))}};return f.set(e),f},u=function(n){var e=n.createTexture();return n.bindTexture(n.TEXTURE_2D,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),e},f=function(n,e){var t=u(n),r=new Image;return r.onload=function(){t.width=r.width,t.height=r.height,n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),n.bindTexture(n.TEXTURE_2D,null)},r.src=e,t},c=function(n,e,t,r){n.bindFramebuffer(n.FRAMEBUFFER,e),void 0!==t&&void 0!==r&&n.viewport(0,0,t,r)},l=function(n,e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e?t?c(n,e.framebuffer,e.width,e.height):c(n,e.framebuffer):t?c(n,null,n.canvas.width,n.canvas.height):c(n,null)},s=function(n,e,t){var r={width:e||n.canvas.clientWidth,height:t||n.canvas.clientHeight},a=u(n);r.texture=a,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,r.width,r.height,0,n.RGBA,n.UNSIGNED_BYTE,null);var o=n.createFramebuffer();return r.framebuffer=o,n.bindFramebuffer(n.FRAMEBUFFER,o),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,a,0),n.bindFramebuffer(n.FRAMEBUFFER,null),r},d={attribFloat:function(n,e,t,r){var a=n.getAttribLocation(e,t);return n.enableVertexAttribArray(a),function(e){n.bindBuffer(n.ARRAY_BUFFER,e),n.vertexAttribPointer(a,r,n.FLOAT,!1,0,0)}}},v={uniform1f:function(n,e,t){var r=n.getUniformLocation(e,t);return function(e){n.uniform1f(r,e)}},uniform1fv:function(n,e,t){var r=n.getUniformLocation(e,t);return function(e){n.uniform1fv(r,e)}},uniform2fv:function(n,e,t){var r=n.getUniformLocation(e,t);return function(e){n.uniform2fv(r,e)}},uniform3fv:function(n,e,t){var r=n.getUniformLocation(e,t);return function(e){n.uniform3fv(r,e)}},uniformTexture:function(n,e,t,r){var a=n.getUniformLocation(e,t);return function(e){n.activeTexture(n.TEXTURE0+r),n.bindTexture(n.TEXTURE_2D,e),n.uniform1i(a,r)}},uniform1i:function(n,e,t){var r=n.getUniformLocation(e,t);return function(e){n.uniform1i(r,e)}},uniformMatrix4fv:function(n,e,t){var r=n.getUniformLocation(e,t);return function(e){n.uniformMatrix4fv(r,!1,e)}}},p=function(n,e,t,r,a){var o=e(n,t,r);return{programInfo:o,use:function(){n.useProgram(o.program)},attribSet:function(n){for(var e in n)o.attribLocations[e]&&o.attribLocations[e](n[e])},uniformSet:function(n){for(var e in n)o.uniformLocations[e]&&o.uniformLocations[e](n[e])},elementSet:function(e){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e)}}},m=function(n){return[[n[0],n[1]],[n[2],n[1]],[n[2],n[3]],[n[0],n[3]]].flat()},h=function(n){return[[n[0],n[1]],[n[0],n[3]],[n[2],n[1]],[n[2],n[3]]].flat()},g=function(n){n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT)},b=function(n,e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];l(n,e,r),t&&g(n)}},1:function(n,e,t){"use strict";t.d(e,"b",(function(){return l})),t.d(e,"c",(function(){return s})),t.d(e,"a",(function(){return d})),t.d(e,"e",(function(){return g})),t.d(e,"d",(function(){return b}));var r=t(2),a=t.n(r),o=t(4),i=t.n(o),u=t(5),f=t.n(u),c=t(3),l=function(){function n(){i()(this,n)}return f()(n,null,[{key:"zero",value:function(){return[0,0]}},{key:"clone",value:function(n){return a()(n)}},{key:"normalize",value:function(e){var t=n.length(e);return t?n.scale(e,1/t):e}},{key:"rotate",value:function(n,e){var t=Math.cos(e),r=Math.sin(e);return[n[0]*t-n[1]*r,n[1]*t+n[0]*r]}},{key:"dot",value:function(n,e){return n[0]*e[0]+n[1]*e[1]}},{key:"cross",value:function(n,e){return n[0]*e[1]-n[1]*e[0]}},{key:"add",value:function(n,e){return[n[0]+e[0],n[1]+e[1]]}},{key:"sub",value:function(n,e){return[n[0]-e[0],n[1]-e[1]]}},{key:"projection",value:function(e,t){var r=n.dot(e,t)/n.dot(t,t);return[t[0]*r,t[1]*r]}},{key:"length",value:function(e){return Math.sqrt(n.dot(e,e))}},{key:"mul",value:function(n,e){return[n[0]*e[0],n[1]*e[1]]}},{key:"div",value:function(n,e){return[n[0]/e[0],n[1]/e[1]]}},{key:"scale",value:function(n,e){return[n[0]*e,n[1]*e]}},{key:"collisionCalc",value:function(e,t,r,a){return n.scale(n.add(n.scale(e,r-a),n.scale(t,2*a)),1/(r+a))}},{key:"getAngle",value:function(n){return Math.atan2(n[1],n[0])}},{key:"floor",value:function(n){return[Math.floor(n[0]),Math.floor(n[1])]}},{key:"fract",value:function(n){return[c.a.fract(n[0]),c.a.fract(n[1])]}},{key:"sin",value:function(n){return[Math.sin(n[0]),Math.sin(n[1])]}},{key:"cos",value:function(n){return[Math.cos(n[0]),Math.cos(n[1])]}},{key:"distance",value:function(e,t){return n.length(n.sub(t,e))}},{key:"mix",value:function(n,e,t){return[c.a.mix(n[0],e[0],t),c.a.mix(n[1],e[1],t)]}},{key:"abs",value:function(n){return[Math.abs(n[0]),Math.abs(n[1])]}}]),n}(),s=function(){function n(){i()(this,n)}return f()(n,null,[{key:"set",value:function(n,e,t){return n[0]=e,n[1]=t,n}},{key:"normalize",value:function(e){var t=l.length(e);return t&&n.scale(e,1/t),e}},{key:"add",value:function(n,e){return n[0]+=e[0],n[1]+=e[1],n}},{key:"sub",value:function(n,e){return n[0]-=e[0],n[1]-=e[1],n}},{key:"scale",value:function(n,e){return n[0]*=e,n[1]*=e,n}},{key:"rotate",value:function(n,e){var t=Math.cos(e),r=Math.sin(e),a=[n[0]*t-n[1]*r,n[1]*t+n[0]*r];return n[0]=a[0],n[1]=a[1],n}}]),n}(),d=function(){function n(){i()(this,n)}return f()(n,null,[{key:"doLineSegmentsIntersect",value:function(n,e,t,r){function a(n,e,t){var r=(e[1]-n[1])*(t[0]-e[0])-(e[0]-n[0])*(t[1]-e[1]);return 0===r?0:r>0?1:2}function o(n,e,t){return e[0]<=Math.max(n[0],t[0])&&e[0]>=Math.min(n[0],t[0])&&e[1]<=Math.max(n[1],t[1])&&e[1]>=Math.min(n[1],t[1])}var i=a(n,e,t),u=a(n,e,r),f=a(t,r,n),c=a(t,r,e);return i!==u&&f!==c||(!(0!==i||!o(n,t,e))||(!(0!==u||!o(n,r,e))||(!(0!==f||!o(t,n,r))||!(0!==c||!o(t,e,r)))))}},{key:"getLine",value:function(n,e){return{pos:n,dir:l.sub(e,n)}}},{key:"toLineDistance",value:function(n,e,t){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=l.sub(t,e),o=a[1],i=-a[0],u=-e[0]*a[1]+a[0]*e[1],f=(n[0]*o+n[1]*i+u)/l.length(a);return r?f:Math.abs(f)}}]),n}(),v=function(n,e,t,r){var a=r*r;return[n[0]*(a-2*r+1)+2*e[0]*(1-r)*r+t[0]*a,n[1]*(a-2*r+1)+2*e[1]*(1-r)*r+t[1]*a]},p=function(n,e,t,r){return[2*r*(n[0]-2*e[0]+t[0])+2*(-n[0]+e[0]),2*r*(n[1]-2*e[1]+t[1])+2*(-n[1]+e[1])]},m=function(n,e,t,r,a){var o=a*a,i=a*a*a;return[n[0]*(3*o-i-3*a+1)+e[0]*(3*i-6*o+3*a)+t[0]*(-3*i+3*o)+r[0]*i,n[1]*(3*o-i-3*a+1)+e[1]*(3*i-6*o+3*a)+t[1]*(-3*i+3*o)+r[1]*i]},h=function(n,e,t,r,a){var o=a*a;return[-3*n[0]+3*e[0]+2*a*(3*n[0]-6*e[0]+3*t[0])+3*o*(-n[0]+3*e[0]-3*t[0]+r[0]),-3*n[1]+3*e[1]+2*a*(3*n[1]-6*e[1]+3*t[1])+3*o*(-n[1]+3*e[1]-3*t[1]+r[1])]},g=function(n,e,t,r){for(var a=[],o=[],i=null,u=0;u<r;u++){var f=u/(r-1),c=v(n,e,t,f),s=l.normalize(p(n,e,t,f));a.push({p:c,t:s,n:[-s[1],s[0]]}),i&&o.push(l.distance(c,i)),i=c}var d=o.reduce((function(n,e){return n+e}));return{points:a,section:o,length:d}},b=function(n,e,t,r,a){for(var o=[],i=[],u=null,f=0;f<a;f++){var c=f/(a-1),s=m(n,e,t,r,c),d=l.normalize(h(n,e,t,r,c));o.push({p:s,t:d,n:[-d[1],d[0]]}),u&&i.push(l.distance(s,u)),u=s}var v=i.reduce((function(n,e){return n+e}));return{points:o,section:i,length:v}}},11:function(n,e,t){var r=t(8);n.exports=function(n,e){if(n){if("string"==typeof n)return r(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(n,e):void 0}}},12:function(n,e,t){var r=t(8);n.exports=function(n){if(Array.isArray(n))return r(n)}},13:function(n,e){n.exports=function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}},14:function(n,e){n.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},15:function(n,e,t){"use strict";var r=t(0),a=t(6),o=t.n(a),i=t(16),u=t.n(i),f=function(n,e,t){var a=Object(r.g)(n,e,t);return{program:a,attribLocations:{vertexPosition:r.b.attribFloat(n,a,"aVertexPosition",2),textureCoord:r.b.attribFloat(n,a,"aTextureCoord",2)},uniformLocations:{flipY:r.j.uniform1f(n,a,"uFlipY"),sampler:r.j.uniformTexture(n,a,"uSampler",0),size:r.j.uniform2fv(n,a,"uSize"),dir:r.j.uniform2fv(n,a,"uDir"),width:r.j.uniform1f(n,a,"uWidth"),power:r.j.uniform1f(n,a,"uPower")}}};e.a=function(n){return Object.assign(Object(r.i)(n,f,o.a,u.a),{draw:function(e){n.drawElements(n.TRIANGLES,e,n.UNSIGNED_BYTE,0)}})}},16:function(n,e){n.exports="precision mediump float;\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform lowp vec2 uSize;\nuniform vec2 uDir;\nuniform float uWidth;\nuniform float uPower;\nconst float pi=3.14159265359;\nvoid main()\n{\n  vec4 color=texture2D(uSampler,vTextureCoord);\n  const int N=10;\n  float ii=max(uWidth,float(N))/float(N);\n  for(int i=1;i<=N;i++){\n    if(uWidth<float(N)&&float(i)>uWidth){\n      break;\n    }\n    float val=cos((float(i)/float(N))*pi);\n    float rate=pow(exp(2.*val)/exp(2.),.75);\n    color+=rate*texture2D(uSampler,vTextureCoord+float(i)*ii*uDir/uSize);\n    color+=rate*texture2D(uSampler,vTextureCoord-float(i)*ii*uDir/uSize);\n  }\n  //color.rgb/=color.a;\n  gl_FragColor=uPower*color;\n}\n"},17:function(n,e,t){"use strict";var r=t(0),a=t(6),o=t.n(a),i=t(18),u=t.n(i),f=function(n,e,t){var a=Object(r.g)(n,e,t);return{program:a,attribLocations:{vertexPosition:r.b.attribFloat(n,a,"aVertexPosition",2),textureCoord:r.b.attribFloat(n,a,"aTextureCoord",2)},uniformLocations:{flipY:r.j.uniform1f(n,a,"uFlipY"),samplerA:r.j.uniformTexture(n,a,"uSamplerA",0),samplerB:r.j.uniformTexture(n,a,"uSamplerB",1)}}};e.a=function(n){return Object.assign(Object(r.i)(n,f,o.a,u.a),{draw:function(e){n.drawElements(n.TRIANGLES,e,n.UNSIGNED_BYTE,0)}})}},18:function(n,e){n.exports="precision mediump float;\nvarying vec2 vTextureCoord;\nuniform sampler2D uSamplerA;\nuniform sampler2D uSamplerB;\nvoid main()\n{\n  gl_FragColor=texture2D(uSamplerA,vTextureCoord)+texture2D(uSamplerB,vTextureCoord);\n}\n"},19:function(n,e){n.exports="precision highp float;\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nvoid main()\n{\n  gl_FragColor=texture2D(uSampler,vTextureCoord);\n}\n"},2:function(n,e,t){var r=t(12),a=t(13),o=t(11),i=t(14);n.exports=function(n){return r(n)||a(n)||o(n)||i()}},21:function(n,e,t){"use strict";var r=t(0),a=t(6),o=t.n(a),i=t(19),u=t.n(i),f=function(n,e,t){var a=Object(r.g)(n,e,t);return{program:a,attribLocations:{vertexPosition:r.b.attribFloat(n,a,"aVertexPosition",2),textureCoord:r.b.attribFloat(n,a,"aTextureCoord",2)},uniformLocations:{flipY:r.j.uniform1f(n,a,"uFlipY"),sampler:r.j.uniformTexture(n,a,"uSampler",0)}}};e.a=function(n){return Object.assign(Object(r.i)(n,f,o.a,u.a),{draw:function(e){n.drawElements(n.TRIANGLES,e,n.UNSIGNED_BYTE,0)}})}},3:function(n,e,t){"use strict";t.d(e,"a",(function(){return u}));var r=t(4),a=t.n(r),o=t(5),i=t.n(o),u=function(){function n(){a()(this,n)}return i()(n,null,[{key:"mix",value:function(n,e,t){return n*(1-t)+e*t}},{key:"fract",value:function(n){return(n%=1)<0?n+1:n}},{key:"inverseMix",value:function(n,e,t){return(t-n)/(e-n)}},{key:"clamp",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return n<=e?e:n>=t?t:n}},{key:"smoothstep",value:function(n,e,t){return(t=clamp(inverseMix(n,e,t)))*t*(3-2*t)}}]),n}()},37:function(n,e,t){"use strict";t.d(e,"a",(function(){return i}));var r=t(1),a=t(3),o=function(n,e){0!=e[0]&&(n[0]=n[0]%e[0]),0!=e[1]&&(n[1]=n[1]%e[1]);var t=r.b.dot(n,[127.1,311.7]);return 2*a.a.fract(43758.5453123*Math.sin(t))-1},i=function(n,e){var t=r.b.floor(n),i=r.b.fract(n),u=r.b.mul(r.b.mul(i,i),r.b.sub([3,3],r.b.scale(i,2))),f=o(t,e),c=o(r.b.add(t,[1,0]),e),l=o(r.b.add(t,[0,1]),e),s=o(r.b.add(t,[1,1]),e);return a.a.mix(a.a.mix(f,c,u[0]),a.a.mix(l,s,u[0]),u[1])}},4:function(n,e){n.exports=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}},5:function(n,e){function t(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}n.exports=function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}},53:function(n,e){n.exports="precision highp float;\nvarying vec2 vTextureCoord;\nuniform vec2 uSize;\nuniform float uTime;\n\nuniform float uLineWidth;\n\nuniform vec2 uStartPos;\nuniform vec2 uEndPos;\nuniform float uOffset;\n\nuniform bool uBranchBool;\nuniform vec2 uBranchStartPos;\nuniform vec2 uBranchEndPos;\nuniform float uBranchOffset;\nuniform bool uStartFixed;\nuniform bool uEndFixed;\n//uniform sampler2D uSampler;\n\nconst float pi=3.14159265359;\nconst int OCTAVE_NUM=5;\n\nfloat distLine(vec2 p,vec2 a,vec2 b,float w){\n  vec2 pa=p-a;\n  vec2 ba=b-a;\n  float t=clamp(dot(pa,ba)/dot(ba,ba),0.,1.);\n  return length(pa-ba*t)/w;\n}\nfloat gradual(vec2 p,vec2 a,vec2 b){\n  vec2 pa=p-a;\n  vec2 ba=b-a;\n  return clamp(dot(pa,ba)/dot(ba,ba),0.,1.);\n}\nvec3 random3(vec3 p){\n  vec3 f=vec3(\n    dot(p,vec3(1.271,3.117,.695)),\n    dot(p,vec3(2.695,1.833,1.327)),\n    dot(p,vec3(2.473,1.085,.965))\n  );\n  return-1.+2.*fract(sin(f)*437.585453123);\n}\nfloat noise_perlin(vec3 p){\n  vec3 i=floor(p);\n  vec3 s=fract(p);\n  float a=dot(random3(i),s);\n  float b=dot(random3(i+vec3(1,0,0)),s-vec3(1,0,0));\n  float c=dot(random3(i+vec3(0,1,0)),s-vec3(0,1,0));\n  float d=dot(random3(i+vec3(0,0,1)),s-vec3(0,0,1));\n  float e=dot(random3(i+vec3(1,1,0)),s-vec3(1,1,0));\n  float f=dot(random3(i+vec3(1,0,1)),s-vec3(1,0,1));\n  float g=dot(random3(i+vec3(0,1,1)),s-vec3(0,1,1));\n  float h=dot(random3(i+vec3(1,1,1)),s-vec3(1,1,1));\n  //vec3 u=smoothstep(0.,1.,s);\n  vec3 u=s*s*(3.-2.*s);\n  return mix(mix(mix(a,b,u.x),mix(c,e,u.x),u.y),mix(mix(d,f,u.x),mix(g,h,u.x),u.y),u.z);\n}\nfloat fbm_noise_perlin(vec3 p){\n  float f=0.;\n  float a=1.;\n  for(int i=0;i<OCTAVE_NUM;i++)\n  {\n    f+=a*noise_perlin(p);\n    p=2.*p;\n    a/=2.;\n  }\n  return f;\n}\nfloat fbm_abs_noise_perlin(vec3 p){\n  float f=0.;\n  float a=1.;\n  for(int i=0;i<OCTAVE_NUM;i++)\n  {\n    f+=a*abs(noise_perlin(p));\n    p=2.*p;\n    a/=2.;\n  }\n  return f;\n}\n\nvec2 random2(vec2 p,vec2 loop){\n  if(loop.x!=0.){\n    p.x=mod(p.x,loop.x);\n  }\n  if(loop.y!=0.){\n    p.y=mod(p.y,loop.y);\n  }\n  vec2 f=vec2(\n    dot(p,vec2(1.271,3.117)),\n    dot(p,vec2(2.695,1.833))\n  );\n  return-1.+2.*fract(sin(f)*437.585453123);\n}\n\nfloat noise_perlin(vec2 p,vec2 loop){\n  vec2 i=floor(p);\n  vec2 f=fract(p);\n  float a=dot(random2(i,loop),f);\n  float b=dot(random2(i+vec2(1.,0.),loop),f-vec2(1.,0.));\n  float c=dot(random2(i+vec2(0.,1.),loop),f-vec2(0.,1.));\n  float d=dot(random2(i+vec2(1.,1.),loop),f-vec2(1.,1.));\n  //vec2 u=smoothstep(0.,1.,f);\n  vec2 u=f*f*(3.-2.*f);\n  return mix(mix(a,b,u.x),mix(c,d,u.x),u.y);\n}\n\nfloat fbm_noise_perlin(vec2 p,vec2 loop){\n  float f=0.;\n  float a=.5;\n  for(int i=0;i<OCTAVE_NUM;i++)\n  {\n    f+=a*noise_perlin(p,loop);\n    p*=2.;\n    a/=2.;\n  }\n  return f;\n}\nvec4 drawLight(float d){\n  float highColorRate=smoothstep(1.,0.,d);\n  float baseColorRate=smoothstep(1.,0.,d/4.);\n  float glowColorRate=smoothstep(1.,0.,d/8.);\n  float endColorRate=smoothstep(1.,0.,d/16.);\n  vec4 highColor=vec4(1.,1.,1.,1.);\n  vec4 baseColor=vec4(.35,.98,.98,1.);\n  vec4 glowColor=vec4(.28,.73,.78,1.);\n  vec4 endColor=vec4(.2,.25,.91,1.);\n  vec4 color=mix(.5*baseColor,highColor,highColorRate)*endColorRate;\n  color=mix(.25*glowColor,color,baseColorRate)*endColorRate;\n  color=mix(.125*endColor,color,glowColorRate)*endColorRate;\n  return color;\n}\nvec4 distLightLine(vec2 p,vec2 a,vec2 b,float w){\n  float d=distLine(p,a,b,w);\n  return drawLight(d);\n}\nvec2 swingFun(vec2 uv,vec2 startPos,vec2 endPos,float power,float offset,float time){\n  vec2 v=endPos-startPos;\n  v=normalize(v);\n  vec2 uv0=uv*clamp(1./max(power,.01),.01,5.);\n  float a=0.;\n  if(power>.01){\n    a=fbm_noise_perlin(vec3(uv0,time));\n  }else{\n    a=abs(noise_perlin(vec3(uv0,time*2.)))-.5;\n  }\n  v=vec2(-v.y,v.x);\n  vec2 move=a*vec2(cos(a*2.*pi),sin(a*2.*pi))+offset*v;\n  return move*.3*power/length(1.5);\n  \n}\nvec4 elBall(vec2 uv,vec2 pos,float r,float time){\n  float len=length(uv-pos);\n  if(len<.05){\n    float a=abs(noise_perlin(vec3(uv*200.,time)));\n    return.15*drawLight(a*len*400.)*pow(clamp(1.-len/.05,0.,1.),3.);\n  }else{\n    return vec4(0.);\n  }\n}\n\nvoid main()\n{\n  vec4 color=vec4(0.);\n  vec2 aspectRatio=vec2(uSize.x/uSize.y,1.);\n  vec2 coord=vTextureCoord*aspectRatio;\n  vec2 startPos=uStartPos/uSize.y;\n  vec2 endPos=uEndPos/uSize.y;\n  vec2 branchStartPos=uBranchStartPos/uSize.y;\n  vec2 branchEndPos=uBranchEndPos/uSize.y;\n  float lineWidth=uLineWidth/uSize.y;\n  //float d=distLine(coord,startPos,endPos,uSize.x/uSize.y);\n  float len=distance(startPos,endPos);\n  //float d1=distLine(coord,branchStartPos,branchEndPos,uSize.x/uSize.y);\n  float len1=distance(branchStartPos,branchEndPos);\n  //if(d<max(len,.333)||(uBranchBool&&d1<max(len1,.333))){\n    \n    float gradualVal=gradual(coord,startPos,endPos);\n    float swing=sin(gradualVal*pi);\n    swing=1.-pow(1.-swing,2.);\n    \n    float gradualVal1=0.;\n    float branchSwing=0.;\n    if(uBranchBool){\n      gradualVal1=gradual(coord,branchStartPos,branchEndPos);\n      branchSwing=sin(gradualVal1*pi);\n      branchSwing=1.-pow(1.-branchSwing,2.);\n      if(!uStartFixed&&uEndFixed){\n        swing=mix(swing,branchSwing,gradualVal1);\n      }else if(uStartFixed&&!uEndFixed){\n        swing=mix(swing,branchSwing,1.-gradualVal1);\n      }else if(!uStartFixed&&!uEndFixed){\n        swing=mix(swing,branchSwing,branchSwing);\n      }else{\n        swing=mix(swing,branchSwing,1.-branchSwing);\n      }\n    }\n    \n    vec2 uv001=vTextureCoord*aspectRatio;\n    if(swing!=0.){\n      uv001+=swing*swingFun(1.2*uv001*aspectRatio,startPos,endPos,1.2*len,uOffset,uTime*3.);\n      if(uBranchBool){\n        if(branchSwing!=0.){\n          uv001+=gradualVal1*branchSwing*swingFun(1.2*uv001*aspectRatio,branchStartPos,branchEndPos,1.2*len1,uBranchOffset,uTime*3.);\n        }\n      }\n    }\n    float r=clamp(pow(.5*length(1.5)/len,2.),lineWidth,lineWidth*2.);\n    float gradualVal2=gradualVal;\n    if(uBranchBool){\n      gradualVal2=gradualVal1;\n    }\n    r*=mix(1.-.5*sin(gradualVal2*pi),3.,clamp(.01/len,0.,1.));\n    \n    if(uBranchBool){\n      color+=distLightLine(uv001,branchStartPos,branchEndPos,r);\n    }else{\n      color+=distLightLine(uv001,startPos,endPos,r);\n    }\n    \n    if(uBranchBool){\n      if(uStartFixed){\n        color+=elBall(coord,branchStartPos,1./len1,uTime*3.);\n      }\n      if(uEndFixed){\n        color+=elBall(coord,branchEndPos,1./len1,uTime*3.);\n      }\n    }else{\n      if(uStartFixed){\n        color+=elBall(coord,startPos,1./len,uTime*3.);\n      }\n      if(uEndFixed){\n        color+=elBall(coord,endPos,1./len,uTime*3.);\n      }\n    }\n    \n  //}\n  \n  gl_FragColor=color;\n}\n\n"},54:function(n,e){n.exports="precision mediump float;\nvarying vec2 vTextureCoord;\nuniform lowp vec2 uSize;\nuniform float uTime;\nuniform vec2 uStartPos;\nuniform vec2 uControlPos;\nuniform vec2 uEndPos;\nuniform float uLineSrcRate;\nuniform vec2 uLineTargetPos;\n\nuniform float uLineWidth;\nuniform bool uOffsetBool;\n\nconst float pi=3.14159265359;\nconst int OCTAVE_NUM=5;\n\nfloat distLine(vec2 p,vec2 a,vec2 b,float w){\n  vec2 pa=p-a;\n  vec2 ba=b-a;\n  float t=clamp(dot(pa,ba)/dot(ba,ba),0.,1.);\n  return length(pa-ba*t)/w;\n}\nvec3 random3(vec3 p){\n  vec3 f=vec3(\n    dot(p,vec3(127.1,311.7,69.5)),\n    dot(p,vec3(269.5,183.3,132.7)),\n    dot(p,vec3(247.3,108.5,96.5))\n  );\n  return-1.+2.*fract(sin(f)*43758.5453123);\n}\nfloat noise_perlin(vec3 p){\n  vec3 i=floor(p);\n  vec3 s=fract(p);\n  float a=dot(random3(i),s);\n  float b=dot(random3(i+vec3(1,0,0)),s-vec3(1,0,0));\n  float c=dot(random3(i+vec3(0,1,0)),s-vec3(0,1,0));\n  float d=dot(random3(i+vec3(0,0,1)),s-vec3(0,0,1));\n  float e=dot(random3(i+vec3(1,1,0)),s-vec3(1,1,0));\n  float f=dot(random3(i+vec3(1,0,1)),s-vec3(1,0,1));\n  float g=dot(random3(i+vec3(0,1,1)),s-vec3(0,1,1));\n  float h=dot(random3(i+vec3(1,1,1)),s-vec3(1,1,1));\n  //vec3 u=smoothstep(0.,1.,s);\n  vec3 u=s*s*(3.-2.*s);\n  return mix(mix(mix(a,b,u.x),mix(c,e,u.x),u.y),mix(mix(d,f,u.x),mix(g,h,u.x),u.y),u.z);\n}\nfloat fbm_noise_perlin(vec3 p){\n  float f=0.;\n  float a=1.;\n  for(int i=0;i<OCTAVE_NUM;i++)\n  {\n    f+=a*noise_perlin(p);\n    p=2.*p;\n    a/=2.;\n  }\n  return f;\n}\n\nfloat cross(vec2 v0,vec2 v1){\n  return v0.x*v1.y-v0.y*v1.x;\n}\nvec2 getQuadraticCurveTo(vec2 p0,vec2 p1,vec2 p2,float t){\n  return p0*(1.-t)*(1.-t)+p1*2.*(1.-t)*t+p2*t*t;\n}\nvec2 getQuadraticCurveToTangent(vec2 p0,vec2 p1,vec2 p2,float t){\n  return 2.*t*(p0-p1*2.+p2)+2.*(-p0+p1);\n}\n\nfloat quadraticCurveGradual(vec2 p,vec2 a,vec2 b,vec2 c,float w){\n  float s=.5;\n  float rate=.5;\n  const int N=8;\n  vec2 p0=getQuadraticCurveTo(a,b,c,0.);\n  vec2 p2=getQuadraticCurveTo(a,b,c,1.);\n  vec2 p1=getQuadraticCurveTo(a,b,c,rate);\n  for(int i=0;i<N;i++){\n    vec2 t=getQuadraticCurveToTangent(a,b,c,rate);\n    t=vec2(-t.y,t.x);\n    if(cross(p-p1,t)<0.){\n      rate-=s*.5;\n      p2=p1;\n    }else{\n      rate+=s*.5;\n      p0=p1;\n    }\n    s*=.5;\n    p1=getQuadraticCurveTo(a,b,c,rate);\n  }\n  return rate;\n}\nvec2 quadraticCurve(vec2 p,vec2 a,vec2 b,vec2 c,float w){\n  float s=.5;\n  float rate=.5;\n  const int N=8;\n  vec2 p0=getQuadraticCurveTo(a,b,c,0.);\n  vec2 p2=getQuadraticCurveTo(a,b,c,1.);\n  vec2 p1=getQuadraticCurveTo(a,b,c,rate);\n  for(int i=0;i<N;i++){\n    vec2 t=getQuadraticCurveToTangent(a,b,c,rate);\n    t=vec2(-t.y,t.x);\n    if(cross(p-p1,t)<0.){\n      rate-=s*.5;\n      p2=p1;\n    }else{\n      rate+=s*.5;\n      p0=p1;\n    }\n    s*=.5;\n    p1=getQuadraticCurveTo(a,b,c,rate);\n  }\n  return vec2(distLine(p,p0,p2,w),rate);\n}\n\nvec4 distLightLine(vec2 p,vec2 a,vec2 b,vec2 c,float w){\n  vec2 quadraticCurveData=quadraticCurve(p,a,b,c,w);\n  float d=quadraticCurveData.x;\n  \n  float highColorRate=smoothstep(1.,0.,d);\n  float baseColorRate=smoothstep(1.,0.,d/4.);\n  float glowColorRate=smoothstep(1.,0.,d/16.);\n  vec4 highColor=vec4(1.,1.,1.,1.);\n  vec4 baseColor=vec4(.5,1.,1.,0.);\n  vec4 glowColor=vec4(.25,1.,1.,1.);\n  return highColorRate*highColor+.5*pow(baseColorRate,2.)*baseColor+.25*pow(glowColorRate,4.)*glowColor;\n}\nfloat gradual(vec2 p,vec2 a,vec2 b){\n  vec2 pa=p-a;\n  vec2 ba=b-a;\n  return clamp(dot(pa,ba)/dot(ba,ba),0.,1.);\n}\nvoid main()\n{\n  \n  vec2 lineStartPos,lineEndPos,lineControlPos;\n  if(uOffsetBool){\n    lineStartPos=getQuadraticCurveTo(uStartPos,uControlPos,uEndPos,uLineSrcRate);\n    lineEndPos=uLineTargetPos;\n    lineControlPos=mix(lineStartPos,lineEndPos,.5)+vec2(0.,0.);\n  }\n  vec4 color=vec4(0.);\n  float len=distance(uStartPos,uEndPos);\n  vec2 aspectRatio=vec2(uSize.x/uSize.y,1.);\n  vec2 coord=vTextureCoord*uSize;\n  {\n    //float gradualVal=quadraticCurveGradual(coord,uStartPos,uControlPos,uEndPos,1.);\n    float gradualVal=gradual(coord,uStartPos,uEndPos);\n    float gradualVal1=0.;\n    if(uOffsetBool){\n      //gradualVal1=quadraticCurveGradual(coord,lineStartPos,lineControlPos,lineEndPos,1.);\n      gradualVal1=gradual(coord,lineStartPos,lineEndPos);\n      gradualVal1=pow(gradualVal1,2.);\n    }\n    \n    float swing=sin(gradualVal*pi);\n    swing=1.-pow(1.-swing,2.);\n    if(uOffsetBool){\n      swing=mix(swing,sin((1.-gradualVal1)*.5*pi),gradualVal1);\n    }\n    vec2 uv001=vTextureCoord;\n    if(swing!=0.){\n      vec2 uv002=uv001*aspectRatio*clamp(500./max(len,10.),.75,10.);\n      if(uOffsetBool){\n        float len1=distance(lineStartPos,lineEndPos);\n        uv002*=1.+abs(.1*gradualVal1*(len-len1)/len1);\n      }\n      float a=fbm_noise_perlin(vec3(uv002,uTime*3.));\n      vec2 move=a*vec2(cos(a*2.*pi),sin(a*2.*pi));\n      float power=.3*len/length(uSize);\n      uv001+=swing*power*move;\n    }\n    \n    float r=clamp(pow(.5*length(uSize)/len,2.),uLineWidth,uLineWidth*2.);\n    uv001*=uSize;\n    float gradualVal0=gradualVal;\n    if(uOffsetBool){\n      gradualVal0=gradualVal1;\n    }\n    r*=mix((.5+.5*(1.-sin(gradualVal0*pi))),3.,clamp(10./len,0.,1.));\n    \n    if(uOffsetBool){\n      color+=distLightLine(uv001,lineStartPos,lineControlPos,lineEndPos,r);\n    }else{\n      color+=distLightLine(uv001,uStartPos,uControlPos,uEndPos,r);\n    }\n  }\n  gl_FragColor=color;\n  \n}\n\n"},6:function(n,e){n.exports="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying highp vec2 vTextureCoord;\nuniform float uFlipY;\nvoid main(void){\n  vTextureCoord=aTextureCoord;\n  gl_Position=vec4((2.*aVertexPosition+vec2(-1.,-1.))*vec2(1.,uFlipY),0.,1.);\n}"},8:function(n,e){n.exports=function(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}},92:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t(1),o=t(6),i=t.n(o),u=t(53),f=t.n(u),c=function(n,e,t){var a=Object(r.g)(n,e,t);return{program:a,attribLocations:{vertexPosition:r.b.attribFloat(n,a,"aVertexPosition",2),textureCoord:r.b.attribFloat(n,a,"aTextureCoord",2)},uniformLocations:{flipY:r.j.uniform1f(n,a,"uFlipY"),time:r.j.uniform1f(n,a,"uTime"),size:r.j.uniform2fv(n,a,"uSize"),startPos:r.j.uniform2fv(n,a,"uStartPos"),endPos:r.j.uniform2fv(n,a,"uEndPos"),offset:r.j.uniform1f(n,a,"uOffset"),lineWidth:r.j.uniform1f(n,a,"uLineWidth"),branchBool:r.j.uniform1i(n,a,"uBranchBool"),branchOffset:r.j.uniform1f(n,a,"uBranchOffset"),branchStartPos:r.j.uniform2fv(n,a,"uBranchStartPos"),branchEndPos:r.j.uniform2fv(n,a,"uBranchEndPos"),startFixed:r.j.uniform1i(n,a,"uStartFixed"),endFixed:r.j.uniform1i(n,a,"uEndFixed")}}},l=function(n){return Object.assign(Object(r.i)(n,c,i.a,f.a),{draw:function(e){n.drawElements(n.TRIANGLES,e,n.UNSIGNED_BYTE,0)}})},s=t(54),d=t.n(s),v=function(n,e,t){var a=Object(r.g)(n,e,t);return{program:a,attribLocations:{vertexPosition:r.b.attribFloat(n,a,"aVertexPosition",2),textureCoord:r.b.attribFloat(n,a,"aTextureCoord",2)},uniformLocations:{flipY:r.j.uniform1f(n,a,"uFlipY"),time:r.j.uniform1f(n,a,"uTime"),size:r.j.uniform2fv(n,a,"uSize"),startPos:r.j.uniform2fv(n,a,"uStartPos"),controlPos:r.j.uniform2fv(n,a,"uControlPos"),endPos:r.j.uniform2fv(n,a,"uEndPos"),offsetBool:r.j.uniform1i(n,a,"uOffsetBool"),lineSrcRate:r.j.uniform1f(n,a,"uLineSrcRate"),lineTargetPos:r.j.uniform2fv(n,a,"uLineTargetPos"),lineWidth:r.j.uniform1f(n,a,"uLineWidth")}}},p=function(n){return Object.assign(Object(r.i)(n,v,i.a,d.a),{draw:function(e){n.drawElements(n.TRIANGLES,e,n.UNSIGNED_BYTE,0)}})},m=t(21),h=t(15),g=t(17),b=t(2),x=t.n(b),E=(t(37),t(3)),S=function(n){return"number"==typeof n?n:"string"==typeof n&&/\~/g.test(n)?parseFloat(n.replace(/(.+)\~(.+)/g,(function(n,e,t){return E.a.mix(parseFloat(e),parseFloat(t),Math.random())}))):void 0},T=function(n){var e=[[0,0],[1,0],[1,1],[0,1]].flat(),t=Object(r.a)(n,e,2),a=[[0,0],[1,0],[1,1],[0,1]].flat(),o=Object(r.a)(n,a,2),i=[[0,1,3],[1,2,3]].flat();return{positionBufferData:t,textureCoordinatesBufferData:o,indicesBufferData:Object(r.d)(n,i)}},y=function(n,e,t,r,o){o.framebufferTextures,o.size,o.textData,o.textPos;var i=o.electricityRangeList,u=o.electricityList;u.forEach((function(n,e,t){!function(n,e,t,r){if("text"==r.start.type){if(r.start.index){var o=r.start.index.array,i=r.start.index.i,u=r.start.index.j;i=null!=i?i:Math.floor(o.length*Math.random()),u=null!=u?u:Math.floor(o[i].length*Math.random()),a.c.set(n.start.index,i,u)}n.start.range=S(r.start.range),n.start.seed=S(r.start.seed)}else"pos"==r.start.type?r.start.pos&&a.c.set.apply(a.c,[n.start.pos].concat(x()(r.start.pos))):"sub"==r.start.type&&(n.start.src=S(r.start.src),n.start.rate=S(r.start.rate),n.start.range=S(r.start.range),n.start.seed=S(r.start.seed));if("text"==r.end.type){if(r.end.index){a.c.set(n.end.index,r.end.i,r.end.j);var f=r.end.index.array,c=r.end.index.i,l=r.end.index.j,s=r.end.index.uniteRange;r.end.index.unite&&"text"==r.start.type?(c=null!=c?c:n.start.index[0],l=null!=l?l:Math.floor((n.start.index[1]+S(s))%f[c].length)):(c=null!=c?c:Math.floor(f.length*Math.random()),l=null!=l?l:Math.floor(f[c].length*Math.random())),a.c.set(n.end.index,c,l)}n.end.range=S(r.end.range),n.end.seed=S(r.end.seed)}else"pos"==r.end.type?r.end.pos&&a.c.set.apply(a.c,[n.end.pos].concat(x()(r.end.pos))):"sub"==r.end.type&&(n.end.src=S(r.end.src),n.end.rate=S(r.end.rate),n.end.range=S(r.end.range),n.end.seed=S(r.end.seed));n.lineWidth=S(r.lineWidth),n.lifeTimeMax=n.lifeTime=S(r.lifeTime),n.offset=S(r.offset)}(n,0,0,i[e])})),console.log(u)},P=function(n,e,t,o,i){var u=i.now,f=i.framebufferTextures,c=(i.mPos,i.size),l=(i.textData,i.textPos);i.electricityRangeList,i.electricityList;n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA);var s=t.view,d=e.viewShader;d.use(),d.attribSet({vertexPosition:s.positionBufferData.buffer,textureCoord:s.textureCoordinatesBufferData.buffer}),d.uniformSet({flipY:1}),Object(r.k)(n,f.text),s.textureCoordinatesBufferData.set(Object(r.e)([0,0,1,1]));var v=l[0]/n.canvas.width,p=l[1]/n.canvas.height;s.positionBufferData.set(Object(r.e)([v,p,v+o.text.width/n.canvas.width,p+o.text.height/n.canvas.height])),d.uniformSet({sampler:o.text}),d.draw(s.indicesBufferData.length);var m=t.face,h=e.blurShader;h.use(),h.attribSet({vertexPosition:m.positionBufferData.buffer,textureCoord:m.textureCoordinatesBufferData.buffer}),h.uniformSet({size:c,flipY:1,sampler:f.text.texture,width:10,power:.2,dir:[.7071,.7071]}),Object(r.k)(n,f.blurs[0]),h.draw(m.indicesBufferData.length),h.uniformSet({sampler:f.blurs[0].texture,dir:[.7071,-.7071]}),Object(r.k)(n,f.blurs[1]),h.draw(m.indicesBufferData.length),Object(r.k)(n);var g=t.face,b=e.addShader;b.use(),b.attribSet({vertexPosition:g.positionBufferData.buffer,textureCoord:g.textureCoordinatesBufferData.buffer}),b.uniformSet({flipY:-1,samplerA:f.text.texture,samplerB:f.blurs[1].texture}),b.draw(g.indicesBufferData.length);var x=t.face,E=e.electricityShader;E.use(),E.attribSet({vertexPosition:x.positionBufferData.buffer,textureCoord:x.textureCoordinatesBufferData.buffer}),E.uniformSet({size:c,time:.001*u,flipY:-1}),n.blendFunc(n.ONE,n.ONE);var S=[100,200],T=[100,500];E.uniformSet({startPos:S,endPos:T,lineWidth:2,branchBool:!1,offset:0}),E.draw(x.indicesBufferData.length),E.uniformSet({branchBool:!0,branchStartPos:a.b.mix(S,T,.6666),branchEndPos:[200,480],lineWidth:.5,branchOffset:-1,startFixed:!1,endFixed:!0}),E.draw(x.indicesBufferData.length),E.uniformSet({branchBool:!0,branchStartPos:a.b.mix(S,T,.3333),branchEndPos:[200,200],lineWidth:.5,branchOffset:1,startFixed:!1,endFixed:!0}),E.draw(x.indicesBufferData.length)};!function(){var n=document.querySelector("#glcanvas"),e={alpha:!1},t=n.getContext("webgl2",e);if(t||(t=n.getContext("webgl",e)||n.getContext("experimental-webgl",e),!1),t){var o=function(n,e){if(!(n.length<=0)){var t=document.createElement("canvas"),r=t.getContext("2d");r.textAlign="start",r.textBaseline="hanging",r.font=e;var o=r.measureText(n),i=o.actualBoundingBoxRight-o.actualBoundingBoxLeft,u=o.actualBoundingBoxDescent+o.actualBoundingBoxAscent;t.width=i+22,t.height=u+22,r.textAlign="start",r.textBaseline="hanging",r.font=e,r.fillStyle="#ffffff",r.fillText(n,11,o.actualBoundingBoxAscent+11);for(var f=r.getImageData(0,0,t.width,t.height),c=f.data,l=function(n,e,t){return 4*(e+t*n.width)},s=[[0,-1],[1,0],[0,1],[-1,0]],d=[],v=[],p=r.createImageData(f.width,f.height),m=function(n){for(var e=function(e){var t=l(f,e,n);if(c[t+3]>127&&s.some((function(t){return e+t[0]<0||e+t[0]>=f.width||n+t[1]<0||n+t[1]>=f.height||c[l(f,e+t[0],n+t[1])+3]<=127}))){p.data[t+0]=255,p.data[t+1]=255,p.data[t+2]=255,p.data[t+3]=255,d.push([e,n]);var r=s.map((function(r){return a.b.scale(r,c[l(f,e+r[0],n+r[1])+3]-c[t+3])})),o=[0,0];r.forEach((function(n){a.c.add(o,n)})),a.c.normalize(o),v.push(o)}},t=0;t<f.width;t++)e(t)},h=0;h<f.height;h++)m(h);for(var g=[],b=0;b<d.length-1;b++){for(var x=-1,E=b+1;E<d.length;E++){var S=a.b.abs(a.b.sub(d[b],d[E]));if(S[0]<=1&&S[1]<=1&&(x=E,S[0]*S[1]==0))break}if(x>=0){var T=[d[b+1],d[x]];d[x]=T[0],d[b+1]=T[1];var y=[v[b+1],v[x]];v[x]=y[0],v[b+1]=y[1]}else g.push(b+1)}g.push(d.length);for(var P=[],w=[],R=0,B=0;B<g.length;B++)P.push(d.slice(R,g[B])),w.push(v.slice(R,g[B])),R=g[B];r.clearRect(0,0,t.width,t.height),r.globalAlpha=.5,r.fillStyle="#ffffff",r.strokeStyle="#3f7fff",r.lineWidth=1,r.globalAlpha=.35,r.fillText(n,11,o.actualBoundingBoxAscent+11),r.globalAlpha=.5,r.strokeText(n,11,o.actualBoundingBoxAscent+11);var C=t.toDataURL();return{width:t.width,height:t.height,posListG:P,normalListG:w,base64:C}}}("POWER","bold 100px Courier New"),i=[.5*t.canvas.width-.5*o.width,.5*t.canvas.height-.5*o.height],u={electricityShader:l(t),quadraticCurveElectricityShader:p(t),viewShader:Object(m.a)(t),blurShader:Object(h.a)(t),addShader:Object(g.a)(t)},f={face:T(t),view:T(t)},c={text:Object(r.h)(t,o.base64),image:Object(r.h)(t,"../img/image.c0ad24103ffb3cb48c09355b0f9bff2b.jpg")},s=[.5*t.canvas.width,.5*t.canvas.height];n.addEventListener("mousemove",(function(n){a.c.set(s,n.pageX,n.pageY)}));for(var d=[t.canvas.clientWidth,t.canvas.clientHeight],v={text:Object(r.c)(t),blurs:[Object(r.c)(t),Object(r.c)(t)]},b=[{active:!0,start:{type:"pos",pos:[0,0]},end:{type:"text",range:"20~40",seed:"0~100"},lineWidth:3,lifeTime:"50~100",offset:"0.05~0.2"},{active:!0,start:{type:"sub",src:0,rate:"0.5~0.95",range:"0.1~0.4",seed:"0~100"},end:{type:"text",range:"10~40",seed:"0~100"},lineWidth:"0.4~0.6",lifeTime:"25~50",offset:"0.1~0.25"},{active:!0,start:{type:"sub",src:0,rate:"0.5~0.95",range:"0.1~0.4",seed:"0~100"},end:{type:"text",range:"10~40",seed:"0~100"},lineWidth:"0.4~0.6",lifeTime:"25~50",offset:"0.1~0.25"},{active:!0,start:{type:"sub",src:0,rate:"0~1",range:"0.1~0.4",seed:"0~100"},end:{type:"sub",src:0,rate:"0~1",range:"0.1~0.4",seed:"0~100"},lineWidth:"0.5~0.8",lifeTime:"25~50",offset:"-1~1"}],x=0;x<o.posListG.length;x++)for(var E=Math.ceil(o.posListG[x].length/200)+1,S=0;S<E;S++)b.push({active:!0,start:{type:"text",index:{array:o.posListG,i:x},range:"5~10",seed:"0~100"},end:{type:"text",index:{array:o.posListG,unite:!0,uniteRange:"10~40",i:x},range:"5~10",seed:"0~100"},lineWidth:"0.25~0.75",lifeTime:"40~80",offset:"0.2~0.8"});var w=b.map((function(n,e,t){return function(n,e,t){var r={};return r.type=n.start.type+"-"+n.end.type,r.active=n.active,r.start={type:n.start.type},"text"==n.start.type?(r.start.index=[0,0],r.start.range=0,r.start.seed=0):"pos"==n.start.type?r.start.pos=[0,0]:"sub"==n.start.type&&(r.start.src=0,r.start.rate=0),r.end={type:n.start.type},"text"==n.end.type?(r.end.index=[0,0],r.end.range=0,r.end.seed=0):"pos"==n.end.type?r.end.pos=[0,0]:"sub"==n.end.type&&(r.end.src=0,r.end.rate=0),r.lineWidth=0,r.lifeTime=0,r.lifeTimeMax=0,r.offset=0,r}(n)}));y(t,u,f,c,{framebufferTextures:v,size:d,textData:o,textPos:i,electricityRangeList:b,electricityList:w});var R=0;requestAnimationFrame((function n(e){var r=.001*(e-R);R=e,requestAnimationFrame(n),P(t,u,f,c,{now:e,delta:r,mPos:s,framebufferTextures:v,size:d,textData:o,textPos:i,electricityRangeList:b,electricityList:w})}))}else alert("無法初始化WebGL。您的瀏覽器或機器可能不支持它。")}()}});