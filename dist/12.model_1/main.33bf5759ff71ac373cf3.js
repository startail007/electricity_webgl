!function(t){var n={};function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)e.d(r,a,function(n){return t[n]}.bind(null,a));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=77)}({0:function(t,n,e){"use strict";e.d(n,"h",(function(){return h})),e.d(n,"f",(function(){return r})),e.d(n,"c",(function(){return l})),e.d(n,"a",(function(){return o})),e.d(n,"d",(function(){return i})),e.d(n,"g",(function(){return c})),e.d(n,"b",(function(){return d})),e.d(n,"i",(function(){return v})),e.d(n,"e",(function(){return m})),e.d(n,"j",(function(){return g}));var r=function(t,n,e){var r=a(t,t.VERTEX_SHADER,n),o=a(t,t.FRAGMENT_SHADER,e),i=t.createProgram();return t.attachShader(i,r),t.attachShader(i,o),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)?i:(alert("無法初始化著色器程序: "+t.getProgramInfoLog(i)),null)},a=function(t,n,e){var r=t.createShader(n);return t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(alert("編譯著色器時發生錯誤: "+t.getShaderInfoLog(r)),t.deleteShader(r),null)},o=function(t,n,e){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Float32Array,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.STATIC_DRAW,i=t.createBuffer(),u=0,c={buffer:i,get data(){return r},get length(){return r.length},set:function(n){r=new a(n),u=100*Math.ceil(r.length/e/100),t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,u*e*4,o),t.bufferSubData(t.ARRAY_BUFFER,0,r)},add:function(n){var c=r.length,f=100*Math.floor(r.length/e/100);f>=u&&(u=f+100,t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,u*e*4,o),t.bufferSubData(t.ARRAY_BUFFER,0,r));var s=new a(c+e);s.set(r),r=s,this.item(c/e,n)},item:function(n,o){var u=new a(o);r.set(u,n*e),t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferSubData(t.ARRAY_BUFFER,n*e*4,u)},getItem:function(t){return Array.from(r.slice(t*e,(t+1)*e))}};return c.set(n),c},i=function(t,n){var e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uint8Array,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.STATIC_DRAW,o=t.createBuffer(),i=0,u=3,c={buffer:o,get data(){return e},get length(){return e.length},set:function(n){e=new r(n),i=100*Math.ceil(e.length/u/100),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i*u*4,a),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e)},add:function(n){var c=e.length,f=100*Math.floor(e.length/u/100);f>=i&&(i=f+100,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i*u*4,a),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e));var s=new r(c+u);s.set(e),e=s,this.item(c/u,n)},item:function(n,a){var i=new r(a);e.set(i,n*u),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,n*u*4,i)},getItem:function(t){return Array.from(e.slice(t*u,(t+1)*u))}};return c.set(n),c},u=function(t){var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),n},c=function(t,n){var e=u(t),r=new Image;return r.onload=function(){e.width=r.width,e.height=r.height,t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),t.bindTexture(t.TEXTURE_2D,null)},r.src=n,e},f=function(t,n,e,r){t.bindFramebuffer(t.FRAMEBUFFER,n),void 0!==e&&void 0!==r&&t.viewport(0,0,e,r)},s=function(t,n){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n?e?f(t,n.framebuffer,n.width,n.height):f(t,n.framebuffer):e?f(t,null,t.canvas.width,t.canvas.height):f(t,null)},l=function(t,n,e){var r={width:n||t.canvas.clientWidth,height:e||t.canvas.clientHeight},a=u(t);r.texture=a,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,null);var o=t.createFramebuffer();return r.framebuffer=o,t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,a,0),t.bindFramebuffer(t.FRAMEBUFFER,null),r},d={attribFloat:function(t,n,e,r){var a=t.getAttribLocation(n,e);return t.enableVertexAttribArray(a),function(n){t.bindBuffer(t.ARRAY_BUFFER,n),t.vertexAttribPointer(a,r,t.FLOAT,!1,0,0)}}},v={uniform1f:function(t,n,e){var r=t.getUniformLocation(n,e);return function(n){t.uniform1f(r,n)}},uniform2fv:function(t,n,e){var r=t.getUniformLocation(n,e);return function(n){t.uniform2fv(r,n)}},uniform3fv:function(t,n,e){var r=t.getUniformLocation(n,e);return function(n){t.uniform3fv(r,n)}},uniformTexture:function(t,n,e,r){var a=t.getUniformLocation(n,e);return function(n){t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,n),t.uniform1i(a,r)}},uniform1i:function(t,n,e){var r=t.getUniformLocation(n,e);return function(n){t.uniform1i(r,n)}},uniformMatrix4fv:function(t,n,e){var r=t.getUniformLocation(n,e);return function(n){t.uniformMatrix4fv(r,!1,n)}}},h=function(t,n,e,r,a){var o=n(t,e,r);return{programInfo:o,use:function(){t.useProgram(o.program)},attribSet:function(t){for(var n in t)o.attribLocations[n]&&o.attribLocations[n](t[n])},uniformSet:function(t){for(var n in t)o.uniformLocations[n]&&o.uniformLocations[n](t[n])},elementSet:function(n){t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)}}},m=function(t){return[[t[0],t[1]],[t[2],t[1]],[t[2],t[3]],[t[0],t[3]]].flat()},p=function(t){t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)},g=function(t,n){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];s(t,n,r),e&&p(t)}},1:function(t,n,e){"use strict";e.d(n,"b",(function(){return c})),e.d(n,"c",(function(){return f})),e.d(n,"a",(function(){return s})),e.d(n,"e",(function(){return m})),e.d(n,"d",(function(){return p}));var r=e(3),a=e.n(r),o=e(4),i=e.n(o),u=e(2),c=function(){function t(){a()(this,t)}return i()(t,null,[{key:"normalize",value:function(n){return t.length(n)?t.scale(n,1/t.length(n)):n}},{key:"rotate",value:function(t,n){var e=Math.cos(n),r=Math.sin(n);return[t[0]*e-t[1]*r,t[1]*e+t[0]*r]}},{key:"dot",value:function(t,n){return t[0]*n[0]+t[1]*n[1]}},{key:"cross",value:function(t,n){return t[0]*n[1]-t[1]*n[0]}},{key:"add",value:function(t,n){return[t[0]+n[0],t[1]+n[1]]}},{key:"sub",value:function(t,n){return[t[0]-n[0],t[1]-n[1]]}},{key:"projection",value:function(n,e){var r=t.dot(n,e)/t.dot(e,e);return[e[0]*r,e[1]*r]}},{key:"length",value:function(n){return Math.sqrt(t.dot(n,n))}},{key:"mul",value:function(t,n){return[t[0]*n[0],t[1]*n[1]]}},{key:"div",value:function(t,n){return[t[0]/n[0],t[1]/n[1]]}},{key:"scale",value:function(t,n){return[t[0]*n,t[1]*n]}},{key:"collisionCalc",value:function(n,e,r,a){return t.scale(t.add(t.scale(n,r-a),t.scale(e,2*a)),1/(r+a))}},{key:"getAngle",value:function(t){return Math.atan2(t[1],t[0])}},{key:"floor",value:function(t){return[Math.floor(t[0]),Math.floor(t[1])]}},{key:"fract",value:function(t){return[u.a.fract(t[0]),u.a.fract(t[1])]}},{key:"sin",value:function(t){return[Math.sin(t[0]),Math.sin(t[1])]}},{key:"cos",value:function(t){return[Math.cos(t[0]),Math.cos(t[1])]}},{key:"distance",value:function(n,e){return t.length(t.sub(e,n))}},{key:"mix",value:function(t,n,e){return[u.a.mix(t[0],n[0],e),u.a.mix(t[1],n[1],e)]}},{key:"abs",value:function(t){return[Math.abs(t[0]),Math.abs(t[1])]}}]),t}(),f=function(){function t(){a()(this,t)}return i()(t,null,[{key:"set",value:function(t,n,e){return t[0]=n,t[1]=e,t}},{key:"normalize",value:function(n){var e=c.length(n);return e&&t.scale(n,1/e),n}},{key:"add",value:function(t,n){return t[0]+=n[0],t[1]+=n[1],t}},{key:"sub",value:function(t,n){return t[0]-=n[0],t[1]-=n[1],t}},{key:"scale",value:function(t,n){return t[0]*=n,t[1]*=n,t}},{key:"rotate",value:function(t,n){var e=Math.cos(n),r=Math.sin(n),a=[t[0]*e-t[1]*r,t[1]*e+t[0]*r];return t[0]=a[0],t[1]=a[1],t}}]),t}(),s=function(){function t(){a()(this,t)}return i()(t,null,[{key:"doLineSegmentsIntersect",value:function(t,n,e,r){function a(t,n,e){var r=(n[1]-t[1])*(e[0]-n[0])-(n[0]-t[0])*(e[1]-n[1]);return 0===r?0:r>0?1:2}function o(t,n,e){return n[0]<=Math.max(t[0],e[0])&&n[0]>=Math.min(t[0],e[0])&&n[1]<=Math.max(t[1],e[1])&&n[1]>=Math.min(t[1],e[1])}var i=a(t,n,e),u=a(t,n,r),c=a(e,r,t),f=a(e,r,n);return i!==u&&c!==f||(!(0!==i||!o(t,e,n))||(!(0!==u||!o(t,r,n))||(!(0!==c||!o(e,t,r))||!(0!==f||!o(e,n,r)))))}},{key:"getLine",value:function(t,n){return{pos:t,dir:c.sub(n,t)}}},{key:"toLineDistance",value:function(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=c.sub(e,n),o=a[1],i=-a[0],u=-n[0]*a[1]+a[0]*n[1],f=(t[0]*o+t[1]*i+u)/c.length(a);return r?f:Math.abs(f)}}]),t}(),l=function(t,n,e,r){var a=r*r;return[t[0]*(a-2*r+1)+2*n[0]*(1-r)*r+e[0]*a,t[1]*(a-2*r+1)+2*n[1]*(1-r)*r+e[1]*a]},d=function(t,n,e,r){return[2*r*(t[0]-2*n[0]+e[0])+2*(-t[0]+n[0]),2*r*(t[1]-2*n[1]+e[1])+2*(-t[1]+n[1])]},v=function(t,n,e,r,a){var o=a*a,i=a*a*a;return[t[0]*(3*o-i-3*a+1)+n[0]*(3*i-6*o+3*a)+e[0]*(-3*i+3*o)+r[0]*i,t[1]*(3*o-i-3*a+1)+n[1]*(3*i-6*o+3*a)+e[1]*(-3*i+3*o)+r[1]*i]},h=function(t,n,e,r,a){var o=a*a;return[-3*t[0]+3*n[0]+2*a*(3*t[0]-6*n[0]+3*e[0])+3*o*(-t[0]+3*n[0]-3*e[0]+r[0]),-3*t[1]+3*n[1]+2*a*(3*t[1]-6*n[1]+3*e[1])+3*o*(-t[1]+3*n[1]-3*e[1]+r[1])]},m=function(t,n,e,r){for(var a=[],o=[],i=null,u=0;u<r;u++){var f=u/(r-1),s=l(t,n,e,f),v=c.normalize(d(t,n,e,f));a.push({p:s,t:v,n:[-v[1],v[0]]}),i&&o.push(c.distance(s,i)),i=s}var h=o.reduce((function(t,n){return t+n}));return{points:a,section:o,length:h}},p=function(t,n,e,r,a){for(var o=[],i=[],u=null,f=0;f<a;f++){var s=f/(a-1),l=v(t,n,e,r,s),d=c.normalize(h(t,n,e,r,s));o.push({p:l,t:d,n:[-d[1],d[0]]}),u&&i.push(c.distance(l,u)),u=l}var m=i.reduce((function(t,n){return t+n}));return{points:o,section:i,length:m}}},10:function(t,n){t.exports=function(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}},11:function(t,n,e){var r=e(8);t.exports=function(t,n){if(t){if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}}},12:function(t,n,e){var r=e(8);t.exports=function(t){if(Array.isArray(t))return r(t)}},13:function(t,n){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},14:function(t,n){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},2:function(t,n,e){"use strict";e.d(n,"a",(function(){return u}));var r=e(3),a=e.n(r),o=e(4),i=e.n(o),u=function(){function t(){a()(this,t)}return i()(t,null,[{key:"mix",value:function(t,n,e){return t*(1-e)+n*e}},{key:"fract",value:function(t){return(t%=1)<0?t+1:t}},{key:"inverseMix",value:function(t,n,e){return(e-t)/(n-t)}},{key:"clamp",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t<=n?n:t>=e?e:t}},{key:"smoothstep",value:function(t,n,e){return(e=clamp(inverseMix(t,n,e)))*e*(3-2*e)}}]),t}()},3:function(t,n){t.exports=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}},35:function(t,n,e){"use strict";n.a={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}},4:function(t,n){function e(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}},5:function(t,n,e){var r=e(12),a=e(13),o=e(11),i=e(14);t.exports=function(t){return r(t)||a(t)||o(t)||i()}},57:function(t,n){t.exports="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uLength;\nuniform vec2 uThickness;\nuniform vec2 uRadius;\nuniform float uOffset;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vSize;\nvarying vec2 vDir;\nvarying vec2 vRadius;\nvarying vec2 vThickness;\nvarying float vOffset;\nconst float pi=3.14159265359;\nmat2 rotCoord(float a){\n  float sin_factor=sin(a);\n  float cos_factor=cos(a);\n  mat2 rot=mat2(cos_factor,sin_factor,-sin_factor,cos_factor);\n  return rot;\n}\nvec2 getQuadraticCurveTo(vec2 p0,vec2 p1,vec2 p2,float t){\n  return p0*(1.-t)*(1.-t)+p1*2.*(1.-t)*t+p2*t*t;\n}\nvec2 getQuadraticCurveToTangent(vec2 p0,vec2 p1,vec2 p2,float t){\n  return 2.*t*(p0-p1*2.+p2)+2.*(-p0+p1);\n}\nvoid main(void){\n  vRadius=uRadius;\n  vOffset=uOffset;\n  vThickness=uThickness;\n  vSize=vec2(uLength,0.)+max(uThickness.x,uThickness.y)*2.*(1.+8.)+abs(vOffset)*vec2(1.,1.)+max(uRadius.x,uRadius.y)*.5;\n  vTextureCoord=aTextureCoord;\n  vDir=(uModelViewMatrix*vec4(vec2(1.,0.),0.,1.)-uModelViewMatrix*vec4(vec2(0.,0.),0.,1.)).xy;\n  gl_Position=uProjectionMatrix*uModelViewMatrix*vec4(aVertexPosition*vSize*.5,0.,1.);\n}\n\n"},58:function(t,n){t.exports="precision highp float;\nprecision highp sampler2D;\nvarying vec2 vTextureCoord;\nvarying vec2 vSize;\nvarying vec2 vDir;\nvarying vec2 vRadius;\nvarying vec2 vThickness;\nvarying float vOffset;\n\nuniform sampler2D uNoiseSampler;\nuniform sampler2D uGradientColorSampler;\nuniform sampler2D uThicknessScaleSampler;\nuniform float uGradientColorRate;\nuniform float uThicknessScaleRate;\nuniform vec2 uMouse;\nuniform float uTime;\nuniform vec2 uDensity;\nuniform vec2 uFixed;\nuniform float uPower;\nuniform vec2 uBorderPower;\n\nuniform bool uSub;\n\nuniform bool uFlow;\nuniform float uFlowSegment;\nuniform float uFlowRate;\n\nuniform bool uWireframe;\n\nconst float pi=3.14159265359;\n\nfloat gradual(vec2 p,vec2 a,vec2 b){\n  vec2 pa=p-a;\n  vec2 ba=b-a;\n  return clamp(dot(pa,ba)/dot(ba,ba),0.,1.);\n}\nfloat distLine(vec2 p,vec2 a,vec2 b,float w){\n  vec2 pa=p-a;\n  vec2 ba=b-a;\n  float t=clamp(dot(pa,ba)/dot(ba,ba),0.,1.);\n  return length(pa-ba*t)/w;\n}\nfloat drawLight(float d,float power){\n  float f=1.;\n  float a=1.;\n  const int N=3;\n  float maxF=pow(2.,float(N));\n  for(int i=0;i<N;i++){\n    a*=.5;\n    float colorRate=smoothstep(1.,0.,2.*a*d);\n    float rate=pow(colorRate,a*maxF);\n    f=mix(a,f,rate);\n  }\n  f*=power*smoothstep(1.,0.,d/maxF);\n  return f;\n}\nvec4 distLightPoint(vec2 p,vec2 a,float w,float power,sampler2D gradientColorSampler,float gradientColorRate){\n  float d=length(p-a)/w;\n  float f=drawLight(d,power);\n  return vec4(f*texture2D(gradientColorSampler,vec2(f,gradientColorRate)));\n}\nvec4 distLightLine(vec2 p,vec2 a,vec2 b,float w,float power,sampler2D gradientColorSampler,float gradientColorRate){\n  float d=distLine(p,a,b,w);\n  float f=drawLight(d,power);\n  return vec4(f*texture2D(gradientColorSampler,vec2(f,gradientColorRate)));\n}\nmat2 rotCoord(float a){\n  float sin_factor=sin(a);\n  float cos_factor=cos(a);\n  mat2 rot=mat2(cos_factor,sin_factor,-sin_factor,cos_factor);\n  return rot;\n}\nvec3 getNoise(sampler2D sampler,vec2 uv,float time,float startDensity,float endDensity){\n  float ff=abs(texture2D(sampler,fract((uv+vec2(-time,-time)))*.001).r*2.-1.);\n  \n  vec2 uv0x=fract((uv+vec2(-time,0.))*startDensity);\n  vec2 uv1x=fract((uv+vec2(-time,0.))*endDensity);\n  vec2 uv0y=fract((uv+vec2(0.,-time))*startDensity);\n  vec2 uv1y=fract((uv+vec2(0.,-time))*endDensity);\n  \n  float f0=(.5*(texture2D(sampler,uv0x).r+texture2D(sampler,uv0y).g)*2.-1.)*2.*pi;\n  float f1=(.5*(texture2D(sampler,uv1x).r+texture2D(sampler,uv1y).g)*2.-1.)*2.*pi;\n  return vec3(f0,f1,ff);\n}\n\nvec2 getMove(float gradualVal,vec2 dir,float startRadius,float endRadius,float startFixed,float endFixed,vec3 noise){\n  float swing=sin(gradualVal*pi);\n  swing=1.-pow(1.-swing,2.);\n  float a=atan(dir.y,dir.x);\n  vec2 move0=startRadius*mix(1.-startFixed,1.,swing)*vec2(cos(noise.x),sin(noise.x))*rotCoord(a);\n  vec2 move1=endRadius*mix(1.-endFixed,1.,swing)*vec2(cos(noise.y),sin(noise.y))*rotCoord(a);\n  return noise.z*mix(move0,move1,gradualVal);\n}\nvec2 getQuadraticCurveTo(vec2 p0,vec2 p1,vec2 p2,float t){\n  return p0*(1.-t)*(1.-t)+p1*2.*(1.-t)*t+p2*t*t;\n}\nvec2 getQuadraticCurveToTangent(vec2 p0,vec2 p1,vec2 p2,float t){\n  return 2.*t*(p0-p1*2.+p2)+2.*(-p0+p1);\n}\n\nvoid main(void){\n  vec4 color=vec4(0.);\n  \n  /*float len=smoothstep(1.,0.,length(gl_FragCoord.xy-uMouse)/10.);\n  color+=vec4(vec3(len),1.);*/\n  \n  vec2 aspectRatio=vec2(vSize.x/vSize.y,1.);\n  vec2 coord=vTextureCoord*aspectRatio;\n  vec2 startPos=(vec2(0.,.5)*aspectRatio+vec2(.5,0.));\n  vec2 endPos=(vec2(1.,.5)*aspectRatio-vec2(.5,0.));\n  float startR=vThickness.x/vSize.y;\n  float endR=vThickness.y/vSize.y;\n  float power=pow(uPower,.5);\n  \n  vec3 noise=getNoise(uNoiseSampler,gl_FragCoord.xy*.003,uTime,uDensity.x*.5,uDensity.y*.5);\n  \n  float gradualVal=smoothstep(startPos.x,endPos.x,coord.x);\n  vec4 thicknessScale=texture2D(uThicknessScaleSampler,vec2(gradualVal,uThicknessScaleRate));\n  {\n    //主電流\n    vec2 move=getMove(gradualVal,vDir,vRadius.x,vRadius.y,uFixed.x,uFixed.y,noise)/vSize.y;\n    coord+=move;\n\n    {\n\n      // vec2 coord=vTextureCoord*aspectRatio;\n      //光球\n      color+=distLightPoint(coord,startPos,startR,1.,uGradientColorSampler,uGradientColorRate)*uBorderPower.x;\n      color+=distLightPoint(coord,endPos,endR,1.,uGradientColorSampler,uGradientColorRate)*uBorderPower.y;\n    }\n    \n    vec2 offset=getQuadraticCurveTo(vec2(0.,0.),vec2(.5,vOffset*2.),vec2(1.,0.),gradualVal);\n    coord+=offset.y*vec2(0.,-1.)/vSize.y;\n    \n    float r=mix(startR,endR,gradualVal)*power;\n    \n    \n    //r*=(1.-1.*sin(gradualVal*pi));\n    r*=thicknessScale.r;\n    color+=distLightLine(coord,startPos,endPos,r,power,uGradientColorSampler,uGradientColorRate);\n  }\n  {\n    //子電流\n    if(uSub){\n      for(int i=0;i<2;i++){\n        vec3 noise0=getNoise(uNoiseSampler,gl_FragCoord.xy*.001,uTime*.75+float(i+1)*noise.z,max(uDensity.x*.5,.3),max(uDensity.y*.5,.3));\n        float startPosRate=cos(noise0.x)*.5+.5;\n        float endPosRate=sin(noise0.y)*.5+.5;\n        vec2 startPos0=mix(startPos,endPos,startPosRate);\n        vec2 endPos0=mix(startPos,endPos,endPosRate);\n        float gradualVal0=smoothstep(startPos0.x,endPos0.x,coord.x);\n        vec2 move0=sin(gradualVal0*pi)*getMove(gradualVal0,vDir,vRadius.x*.5+vThickness.x,vRadius.y*.5+vThickness.y,1.,1.,noise0)/vSize.y;\n        float r0=mix(mix(startR,endR,startPosRate),mix(startR,endR,endPosRate),gradualVal0)*.5*power;\n        r0*=1.-.5*sin(gradualVal0*pi);\n        color+=min(thicknessScale.r+.2,1.)*distLightLine(coord+move0,startPos0,endPos0,r0,power,uGradientColorSampler,uGradientColorRate);\n      }\n    }\n  }\n  {\n    //流動\n    if(uFlow){\n      float s=uFlowSegment;\n      float rate=mix(-s-s,1.+s,uFlowRate);\n      vec2 startPos00=mix(startPos,endPos,rate);\n      vec2 endPos00=mix(startPos,endPos,s+rate);\n      float gradualVal00=smoothstep(startPos00.x,endPos00.x,coord.x);\n      \n      /*float angle=fract(gradualVal00+.5)*2.*pi+.5*pi;\n      color*=sin(angle-.5*cos(angle));*/\n      \n      color*=sin(gradualVal00*pi);\n    }\n    \n  }\n  \n  //color=texture2D(uGradientColorSampler,vTextureCoord);\n  \n  if(uWireframe){\n    vec2 lineWidth=1./vSize;\n    if(vTextureCoord.x<lineWidth.x||vTextureCoord.x>1.-lineWidth.x||vTextureCoord.y<lineWidth.y||vTextureCoord.y>1.-lineWidth.y){\n      color+=.5*vec4(1.,0.,0.,1.);\n    }\n  }\n  //color+=distLightLine(coord,mix(startPos,endPos,.5),mix(startPos,endPos,.5)+vec2(0.,.2),.01,1.5);\n  \n  gl_FragColor=color;\n}"},7:function(t,n,e){"use strict";e.d(n,"a",(function(){return r}));var r={};e.r(r),e.d(r,"create",(function(){return i})),e.d(r,"clone",(function(){return u})),e.d(r,"copy",(function(){return c})),e.d(r,"fromValues",(function(){return f})),e.d(r,"set",(function(){return s})),e.d(r,"identity",(function(){return l})),e.d(r,"transpose",(function(){return d})),e.d(r,"invert",(function(){return v})),e.d(r,"adjoint",(function(){return h})),e.d(r,"determinant",(function(){return m})),e.d(r,"multiply",(function(){return p})),e.d(r,"translate",(function(){return g})),e.d(r,"scale",(function(){return b})),e.d(r,"rotate",(function(){return M})),e.d(r,"rotateX",(function(){return x})),e.d(r,"rotateY",(function(){return R})),e.d(r,"rotateZ",(function(){return y})),e.d(r,"fromTranslation",(function(){return T})),e.d(r,"fromScaling",(function(){return E})),e.d(r,"fromRotation",(function(){return S})),e.d(r,"fromXRotation",(function(){return A})),e.d(r,"fromYRotation",(function(){return w})),e.d(r,"fromZRotation",(function(){return P})),e.d(r,"fromRotationTranslation",(function(){return F})),e.d(r,"fromQuat2",(function(){return _})),e.d(r,"getTranslation",(function(){return L})),e.d(r,"getScaling",(function(){return D})),e.d(r,"getRotation",(function(){return C})),e.d(r,"fromRotationTranslationScale",(function(){return k})),e.d(r,"fromRotationTranslationScaleOrigin",(function(){return U})),e.d(r,"fromQuat",(function(){return B})),e.d(r,"frustum",(function(){return O})),e.d(r,"perspective",(function(){return I})),e.d(r,"perspectiveFromFieldOfView",(function(){return N})),e.d(r,"ortho",(function(){return j})),e.d(r,"lookAt",(function(){return V})),e.d(r,"targetTo",(function(){return Y})),e.d(r,"str",(function(){return G})),e.d(r,"frob",(function(){return X})),e.d(r,"add",(function(){return z})),e.d(r,"subtract",(function(){return W})),e.d(r,"multiplyScalar",(function(){return Q})),e.d(r,"multiplyScalarAndAdd",(function(){return q})),e.d(r,"exactEquals",(function(){return H})),e.d(r,"equals",(function(){return Z})),e.d(r,"mul",(function(){return K})),e.d(r,"sub",(function(){return $}));var a=1e-6,o="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function i(){var t=new o(16);return o!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function u(t){var n=new o(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function c(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function f(t,n,e,r,a,i,u,c,f,s,l,d,v,h,m,p){var g=new o(16);return g[0]=t,g[1]=n,g[2]=e,g[3]=r,g[4]=a,g[5]=i,g[6]=u,g[7]=c,g[8]=f,g[9]=s,g[10]=l,g[11]=d,g[12]=v,g[13]=h,g[14]=m,g[15]=p,g}function s(t,n,e,r,a,o,i,u,c,f,s,l,d,v,h,m,p){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=c,t[8]=f,t[9]=s,t[10]=l,t[11]=d,t[12]=v,t[13]=h,t[14]=m,t[15]=p,t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function d(t,n){if(t===n){var e=n[1],r=n[2],a=n[3],o=n[6],i=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=o,t[11]=n[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function v(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],f=n[7],s=n[8],l=n[9],d=n[10],v=n[11],h=n[12],m=n[13],p=n[14],g=n[15],b=e*u-r*i,M=e*c-a*i,x=e*f-o*i,R=r*c-a*u,y=r*f-o*u,T=a*f-o*c,E=s*m-l*h,S=s*p-d*h,A=s*g-v*h,w=l*p-d*m,P=l*g-v*m,F=d*g-v*p,_=b*F-M*P+x*w+R*A-y*S+T*E;return _?(_=1/_,t[0]=(u*F-c*P+f*w)*_,t[1]=(a*P-r*F-o*w)*_,t[2]=(m*T-p*y+g*R)*_,t[3]=(d*y-l*T-v*R)*_,t[4]=(c*A-i*F-f*S)*_,t[5]=(e*F-a*A+o*S)*_,t[6]=(p*x-h*T-g*M)*_,t[7]=(s*T-d*x+v*M)*_,t[8]=(i*P-u*A+f*E)*_,t[9]=(r*A-e*P-o*E)*_,t[10]=(h*y-m*x+g*b)*_,t[11]=(l*x-s*y-v*b)*_,t[12]=(u*S-i*w-c*E)*_,t[13]=(e*w-r*S+a*E)*_,t[14]=(m*M-h*R-p*b)*_,t[15]=(s*R-l*M+d*b)*_,t):null}function h(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],f=n[7],s=n[8],l=n[9],d=n[10],v=n[11],h=n[12],m=n[13],p=n[14],g=n[15];return t[0]=u*(d*g-v*p)-l*(c*g-f*p)+m*(c*v-f*d),t[1]=-(r*(d*g-v*p)-l*(a*g-o*p)+m*(a*v-o*d)),t[2]=r*(c*g-f*p)-u*(a*g-o*p)+m*(a*f-o*c),t[3]=-(r*(c*v-f*d)-u*(a*v-o*d)+l*(a*f-o*c)),t[4]=-(i*(d*g-v*p)-s*(c*g-f*p)+h*(c*v-f*d)),t[5]=e*(d*g-v*p)-s*(a*g-o*p)+h*(a*v-o*d),t[6]=-(e*(c*g-f*p)-i*(a*g-o*p)+h*(a*f-o*c)),t[7]=e*(c*v-f*d)-i*(a*v-o*d)+s*(a*f-o*c),t[8]=i*(l*g-v*m)-s*(u*g-f*m)+h*(u*v-f*l),t[9]=-(e*(l*g-v*m)-s*(r*g-o*m)+h*(r*v-o*l)),t[10]=e*(u*g-f*m)-i*(r*g-o*m)+h*(r*f-o*u),t[11]=-(e*(u*v-f*l)-i*(r*v-o*l)+s*(r*f-o*u)),t[12]=-(i*(l*p-d*m)-s*(u*p-c*m)+h*(u*d-c*l)),t[13]=e*(l*p-d*m)-s*(r*p-a*m)+h*(r*d-a*l),t[14]=-(e*(u*p-c*m)-i*(r*p-a*m)+h*(r*c-a*u)),t[15]=e*(u*d-c*l)-i*(r*d-a*l)+s*(r*c-a*u),t}function m(t){var n=t[0],e=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],c=t[7],f=t[8],s=t[9],l=t[10],d=t[11],v=t[12],h=t[13],m=t[14],p=t[15];return(n*i-e*o)*(l*p-d*m)-(n*u-r*o)*(s*p-d*h)+(n*c-a*o)*(s*m-l*h)+(e*u-r*i)*(f*p-d*v)-(e*c-a*i)*(f*m-l*v)+(r*c-a*u)*(f*h-s*v)}function p(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],f=n[6],s=n[7],l=n[8],d=n[9],v=n[10],h=n[11],m=n[12],p=n[13],g=n[14],b=n[15],M=e[0],x=e[1],R=e[2],y=e[3];return t[0]=M*r+x*u+R*l+y*m,t[1]=M*a+x*c+R*d+y*p,t[2]=M*o+x*f+R*v+y*g,t[3]=M*i+x*s+R*h+y*b,M=e[4],x=e[5],R=e[6],y=e[7],t[4]=M*r+x*u+R*l+y*m,t[5]=M*a+x*c+R*d+y*p,t[6]=M*o+x*f+R*v+y*g,t[7]=M*i+x*s+R*h+y*b,M=e[8],x=e[9],R=e[10],y=e[11],t[8]=M*r+x*u+R*l+y*m,t[9]=M*a+x*c+R*d+y*p,t[10]=M*o+x*f+R*v+y*g,t[11]=M*i+x*s+R*h+y*b,M=e[12],x=e[13],R=e[14],y=e[15],t[12]=M*r+x*u+R*l+y*m,t[13]=M*a+x*c+R*d+y*p,t[14]=M*o+x*f+R*v+y*g,t[15]=M*i+x*s+R*h+y*b,t}function g(t,n,e){var r,a,o,i,u,c,f,s,l,d,v,h,m=e[0],p=e[1],g=e[2];return n===t?(t[12]=n[0]*m+n[4]*p+n[8]*g+n[12],t[13]=n[1]*m+n[5]*p+n[9]*g+n[13],t[14]=n[2]*m+n[6]*p+n[10]*g+n[14],t[15]=n[3]*m+n[7]*p+n[11]*g+n[15]):(r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],f=n[6],s=n[7],l=n[8],d=n[9],v=n[10],h=n[11],t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=c,t[6]=f,t[7]=s,t[8]=l,t[9]=d,t[10]=v,t[11]=h,t[12]=r*m+u*p+l*g+n[12],t[13]=a*m+c*p+d*g+n[13],t[14]=o*m+f*p+v*g+n[14],t[15]=i*m+s*p+h*g+n[15]),t}function b(t,n,e){var r=e[0],a=e[1],o=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function M(t,n,e,r){var o,i,u,c,f,s,l,d,v,h,m,p,g,b,M,x,R,y,T,E,S,A,w,P,F=r[0],_=r[1],L=r[2],D=Math.hypot(F,_,L);return D<a?null:(F*=D=1/D,_*=D,L*=D,o=Math.sin(e),u=1-(i=Math.cos(e)),c=n[0],f=n[1],s=n[2],l=n[3],d=n[4],v=n[5],h=n[6],m=n[7],p=n[8],g=n[9],b=n[10],M=n[11],x=F*F*u+i,R=_*F*u+L*o,y=L*F*u-_*o,T=F*_*u-L*o,E=_*_*u+i,S=L*_*u+F*o,A=F*L*u+_*o,w=_*L*u-F*o,P=L*L*u+i,t[0]=c*x+d*R+p*y,t[1]=f*x+v*R+g*y,t[2]=s*x+h*R+b*y,t[3]=l*x+m*R+M*y,t[4]=c*T+d*E+p*S,t[5]=f*T+v*E+g*S,t[6]=s*T+h*E+b*S,t[7]=l*T+m*E+M*S,t[8]=c*A+d*w+p*P,t[9]=f*A+v*w+g*P,t[10]=s*A+h*w+b*P,t[11]=l*A+m*w+M*P,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function x(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[4],i=n[5],u=n[6],c=n[7],f=n[8],s=n[9],l=n[10],d=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*a+f*r,t[5]=i*a+s*r,t[6]=u*a+l*r,t[7]=c*a+d*r,t[8]=f*a-o*r,t[9]=s*a-i*r,t[10]=l*a-u*r,t[11]=d*a-c*r,t}function R(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],i=n[1],u=n[2],c=n[3],f=n[8],s=n[9],l=n[10],d=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a-f*r,t[1]=i*a-s*r,t[2]=u*a-l*r,t[3]=c*a-d*r,t[8]=o*r+f*a,t[9]=i*r+s*a,t[10]=u*r+l*a,t[11]=c*r+d*a,t}function y(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],i=n[1],u=n[2],c=n[3],f=n[4],s=n[5],l=n[6],d=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a+f*r,t[1]=i*a+s*r,t[2]=u*a+l*r,t[3]=c*a+d*r,t[4]=f*a-o*r,t[5]=s*a-i*r,t[6]=l*a-u*r,t[7]=d*a-c*r,t}function T(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function E(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(t,n,e){var r,o,i,u=e[0],c=e[1],f=e[2],s=Math.hypot(u,c,f);return s<a?null:(u*=s=1/s,c*=s,f*=s,r=Math.sin(n),i=1-(o=Math.cos(n)),t[0]=u*u*i+o,t[1]=c*u*i+f*r,t[2]=f*u*i-c*r,t[3]=0,t[4]=u*c*i-f*r,t[5]=c*c*i+o,t[6]=f*c*i+u*r,t[7]=0,t[8]=u*f*i+c*r,t[9]=c*f*i-u*r,t[10]=f*f*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function A(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function F(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=r+r,c=a+a,f=o+o,s=r*u,l=r*c,d=r*f,v=a*c,h=a*f,m=o*f,p=i*u,g=i*c,b=i*f;return t[0]=1-(v+m),t[1]=l+b,t[2]=d-g,t[3]=0,t[4]=l-b,t[5]=1-(s+m),t[6]=h+p,t[7]=0,t[8]=d+g,t[9]=h-p,t[10]=1-(s+v),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function _(t,n){var e=new o(3),r=-n[0],a=-n[1],i=-n[2],u=n[3],c=n[4],f=n[5],s=n[6],l=n[7],d=r*r+a*a+i*i+u*u;return d>0?(e[0]=2*(c*u+l*r+f*i-s*a)/d,e[1]=2*(f*u+l*a+s*r-c*i)/d,e[2]=2*(s*u+l*i+c*a-f*r)/d):(e[0]=2*(c*u+l*r+f*i-s*a),e[1]=2*(f*u+l*a+s*r-c*i),e[2]=2*(s*u+l*i+c*a-f*r)),F(t,n,e),t}function L(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function D(t,n){var e=n[0],r=n[1],a=n[2],o=n[4],i=n[5],u=n[6],c=n[8],f=n[9],s=n[10];return t[0]=Math.hypot(e,r,a),t[1]=Math.hypot(o,i,u),t[2]=Math.hypot(c,f,s),t}function C(t,n){var e=new o(3);D(e,n);var r=1/e[0],a=1/e[1],i=1/e[2],u=n[0]*r,c=n[1]*a,f=n[2]*i,s=n[4]*r,l=n[5]*a,d=n[6]*i,v=n[8]*r,h=n[9]*a,m=n[10]*i,p=u+l+m,g=0;return p>0?(g=2*Math.sqrt(p+1),t[3]=.25*g,t[0]=(d-h)/g,t[1]=(v-f)/g,t[2]=(c-s)/g):u>l&&u>m?(g=2*Math.sqrt(1+u-l-m),t[3]=(d-h)/g,t[0]=.25*g,t[1]=(c+s)/g,t[2]=(v+f)/g):l>m?(g=2*Math.sqrt(1+l-u-m),t[3]=(v-f)/g,t[0]=(c+s)/g,t[1]=.25*g,t[2]=(d+h)/g):(g=2*Math.sqrt(1+m-u-l),t[3]=(c-s)/g,t[0]=(v+f)/g,t[1]=(d+h)/g,t[2]=.25*g),t}function k(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=n[3],c=a+a,f=o+o,s=i+i,l=a*c,d=a*f,v=a*s,h=o*f,m=o*s,p=i*s,g=u*c,b=u*f,M=u*s,x=r[0],R=r[1],y=r[2];return t[0]=(1-(h+p))*x,t[1]=(d+M)*x,t[2]=(v-b)*x,t[3]=0,t[4]=(d-M)*R,t[5]=(1-(l+p))*R,t[6]=(m+g)*R,t[7]=0,t[8]=(v+b)*y,t[9]=(m-g)*y,t[10]=(1-(l+h))*y,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function U(t,n,e,r,a){var o=n[0],i=n[1],u=n[2],c=n[3],f=o+o,s=i+i,l=u+u,d=o*f,v=o*s,h=o*l,m=i*s,p=i*l,g=u*l,b=c*f,M=c*s,x=c*l,R=r[0],y=r[1],T=r[2],E=a[0],S=a[1],A=a[2],w=(1-(m+g))*R,P=(v+x)*R,F=(h-M)*R,_=(v-x)*y,L=(1-(d+g))*y,D=(p+b)*y,C=(h+M)*T,k=(p-b)*T,U=(1-(d+m))*T;return t[0]=w,t[1]=P,t[2]=F,t[3]=0,t[4]=_,t[5]=L,t[6]=D,t[7]=0,t[8]=C,t[9]=k,t[10]=U,t[11]=0,t[12]=e[0]+E-(w*E+_*S+C*A),t[13]=e[1]+S-(P*E+L*S+k*A),t[14]=e[2]+A-(F*E+D*S+U*A),t[15]=1,t}function B(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e+e,u=r+r,c=a+a,f=e*i,s=r*i,l=r*u,d=a*i,v=a*u,h=a*c,m=o*i,p=o*u,g=o*c;return t[0]=1-l-h,t[1]=s+g,t[2]=d-p,t[3]=0,t[4]=s-g,t[5]=1-f-h,t[6]=v+m,t[7]=0,t[8]=d+p,t[9]=v-m,t[10]=1-f-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,n,e,r,a,o,i){var u=1/(e-n),c=1/(a-r),f=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(e+n)*u,t[9]=(a+r)*c,t[10]=(i+o)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*f,t[15]=0,t}function I(t,n,e,r,a){var o,i=1/Math.tan(n/2);return t[0]=i/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(o=1/(r-a),t[10]=(a+r)*o,t[14]=2*a*r*o):(t[10]=-1,t[14]=-2*r),t}function N(t,n,e,r){var a=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),i=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),c=2/(i+u),f=2/(a+o);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(i-u)*c*.5,t[9]=(a-o)*f*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t}function j(t,n,e,r,a,o,i){var u=1/(n-e),c=1/(r-a),f=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(n+e)*u,t[13]=(a+r)*c,t[14]=(i+o)*f,t[15]=1,t}function V(t,n,e,r){var o,i,u,c,f,s,d,v,h,m,p=n[0],g=n[1],b=n[2],M=r[0],x=r[1],R=r[2],y=e[0],T=e[1],E=e[2];return Math.abs(p-y)<a&&Math.abs(g-T)<a&&Math.abs(b-E)<a?l(t):(d=p-y,v=g-T,h=b-E,o=x*(h*=m=1/Math.hypot(d,v,h))-R*(v*=m),i=R*(d*=m)-M*h,u=M*v-x*d,(m=Math.hypot(o,i,u))?(o*=m=1/m,i*=m,u*=m):(o=0,i=0,u=0),c=v*u-h*i,f=h*o-d*u,s=d*i-v*o,(m=Math.hypot(c,f,s))?(c*=m=1/m,f*=m,s*=m):(c=0,f=0,s=0),t[0]=o,t[1]=c,t[2]=d,t[3]=0,t[4]=i,t[5]=f,t[6]=v,t[7]=0,t[8]=u,t[9]=s,t[10]=h,t[11]=0,t[12]=-(o*p+i*g+u*b),t[13]=-(c*p+f*g+s*b),t[14]=-(d*p+v*g+h*b),t[15]=1,t)}function Y(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=r[0],c=r[1],f=r[2],s=a-e[0],l=o-e[1],d=i-e[2],v=s*s+l*l+d*d;v>0&&(s*=v=1/Math.sqrt(v),l*=v,d*=v);var h=c*d-f*l,m=f*s-u*d,p=u*l-c*s;return(v=h*h+m*m+p*p)>0&&(h*=v=1/Math.sqrt(v),m*=v,p*=v),t[0]=h,t[1]=m,t[2]=p,t[3]=0,t[4]=l*p-d*m,t[5]=d*h-s*p,t[6]=s*m-l*h,t[7]=0,t[8]=s,t[9]=l,t[10]=d,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t}function G(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function X(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function z(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t}function W(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}function Q(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t}function q(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t}function H(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function Z(t,n){var e=t[0],r=t[1],o=t[2],i=t[3],u=t[4],c=t[5],f=t[6],s=t[7],l=t[8],d=t[9],v=t[10],h=t[11],m=t[12],p=t[13],g=t[14],b=t[15],M=n[0],x=n[1],R=n[2],y=n[3],T=n[4],E=n[5],S=n[6],A=n[7],w=n[8],P=n[9],F=n[10],_=n[11],L=n[12],D=n[13],C=n[14],k=n[15];return Math.abs(e-M)<=a*Math.max(1,Math.abs(e),Math.abs(M))&&Math.abs(r-x)<=a*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(o-R)<=a*Math.max(1,Math.abs(o),Math.abs(R))&&Math.abs(i-y)<=a*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(u-T)<=a*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-E)<=a*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(f-S)<=a*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(s-A)<=a*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(l-w)<=a*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(d-P)<=a*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(v-F)<=a*Math.max(1,Math.abs(v),Math.abs(F))&&Math.abs(h-_)<=a*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(m-L)<=a*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(p-D)<=a*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(g-C)<=a*Math.max(1,Math.abs(g),Math.abs(C))&&Math.abs(b-k)<=a*Math.max(1,Math.abs(b),Math.abs(k))}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var K=p,$=W},77:function(t,n,e){"use strict";e.r(n);var r=e(10),a=e.n(r),o=e(5),i=e.n(o),u=e(7),c=e(3),f=e.n(c),s=e(4),l=e.n(s),d=e(2),v=e(1),h=function(){function t(n){f()(this,t),this.canvas=n,this.mouse=[0,0]}return l()(t,[{key:"create",value:function(t){var n=this;this.d=new Array(t).fill(void 0).map((function(){return{p:[0,0],v:[0,0]}})),this.canvas.addEventListener("mousemove",(function(t){n.mouse[0]=t.offsetX,n.mouse[1]=t.offsetY}))}},{key:"draw",value:function(t){for(var n=0;n<this.d.length;n++)t.fillStyle="#00ff00",t.beginPath(),t.arc.apply(t,i()(this.d[n].p).concat([10,0,2*Math.PI])),t.fill();for(var e=0;e<this.d.length-1;e++)t.strokeStyle="#00ff00",t.lineWidth=2,t.lineCap="round",t.beginPath(),t.moveTo.apply(t,i()(this.d[e].p)),t.lineTo.apply(t,i()(this.d[e+1].p)),t.stroke()}},{key:"update",value:function(){for(var t=0;t<this.d.length;t++){var n=v.b.sub(v.b.mix(this.d[t].p,t-1>=0?this.d[t-1].p:this.mouse,.05),this.d[t].p);v.c.add(this.d[t].v,n),v.c.add(this.d[t].p,this.d[t].v);var e=t/(this.d.length-1);v.c.scale(this.d[t].v,d.a.mix(.6,.7,1-e))}}}]),t}(),m=e(0),p=(e(35),function(t,n,e){var r=t.createShader(n);return t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(alert("編譯著色器時發生錯誤: "+t.getShaderInfoLog(r)),t.deleteShader(r),null)}),g=function(t,n,e,r){var a=t.getAttribLocation(n,e);return t.enableVertexAttribArray(a),function(n){t.bindBuffer(t.ARRAY_BUFFER,n),t.vertexAttribPointer(a,r,t.FLOAT,!1,0,0)}},b=function(t,n,e){var r=t.getUniformLocation(n,e);return function(n){t.uniform1f(r,n)}},M=function(t,n,e){var r=t.getUniformLocation(n,e);return function(n){t.uniform2fv(r,n)}},x=function(t,n,e,r){var a=t.getUniformLocation(n,e);return function(n){t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,n),t.uniform1i(a,r)}},R=function(t,n,e){var r=t.getUniformLocation(n,e);return function(n){t.uniform1i(r,n)}},y=function(t,n,e){var r=t.getUniformLocation(n,e);return function(n){t.uniformMatrix4fv(r,!1,n)}},T=e(57),E=e.n(T),S=e(58),A=e.n(S),w=function(t,n,e){var r=function(t,n,e){var r=p(t,t.VERTEX_SHADER,n),a=p(t,t.FRAGMENT_SHADER,e),o=t.createProgram();return t.attachShader(o,r),t.attachShader(o,a),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)?o:(alert("無法初始化著色器程序: "+t.getProgramInfoLog(o)),null)}(t,n,e);return{program:r,attribLocations:{vertexPosition:g(t,r,"aVertexPosition",2),textureCoord:g(t,r,"aTextureCoord",2)},uniformLocations:{projectionMatrix:y(t,r,"uProjectionMatrix"),modelViewMatrix:y(t,r,"uModelViewMatrix"),noiseSampler:x(t,r,"uNoiseSampler",0),gradientColorSampler:x(t,r,"uGradientColorSampler",1),thicknessScaleSampler:x(t,r,"uThicknessScaleSampler",2),mouse:M(t,r,"uMouse"),length:b(t,r,"uLength"),time:b(t,r,"uTime"),density:M(t,r,"uDensity"),fixed:M(t,r,"uFixed"),radius:M(t,r,"uRadius"),thickness:M(t,r,"uThickness"),offset:b(t,r,"uOffset"),power:b(t,r,"uPower"),borderPower:M(t,r,"uBorderPower"),gradientColorRate:b(t,r,"uGradientColorRate"),thicknessScaleRate:b(t,r,"uThicknessScaleRate"),sub:R(t,r,"uSub"),flow:R(t,r,"uFlow"),flowSegment:b(t,r,"uFlowSegment"),flowRate:b(t,r,"uFlowRate"),wireframe:R(t,r,"uWireframe")}}},P=function(t){return Object.assign(function(t,n,e,r,a){var o=n(t,e,r);return{programInfo:o,use:function(){t.useProgram(o.program)},attribSet:function(t){for(var n in t)o.attribLocations[n]&&o.attribLocations[n](t[n])},uniformSet:function(t){for(var n in t)o.uniformLocations[n]&&o.uniformLocations[n](t[n])},elementSet:function(n){t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)}}}(t,w,E.a,A.a),{draw:function(n){t.drawElements(t.TRIANGLES,n,t.UNSIGNED_BYTE,0)}})},F=e(9),_=function(t){var n=[[-1,-1],[-1,1],[1,-1],[1,1]].flat(),e=Object(m.a)(t,n,2),r=[[0,0],[0,1],[1,0],[1,1]].flat(),a=Object(m.a)(t,r,2),o=[[1,2,0],[1,3,2]].flat();return{positionBufferData:e,textureCoordinatesBufferData:a,indicesBufferData:Object(m.d)(t,o,Uint8Array)}},L=function(t,n,e,r,a){a.framebufferTextures,a.size},D=function(t,n,e,r,o){var c=o.now,f=o.delta,s=(o.framebufferTextures,o.mPos),l=o.size,d=o.pList;o.moveball.update();var h=u.a.create();u.a.ortho(h,0,t.canvas.clientWidth,t.canvas.clientHeight,0,.1,100),u.a.translate(h,h,[0,0,-1]),t.enable(t.CULL_FACE),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE);var p=u.a.create(),g=e.model,b=n.electricityModelShader;b.use(),b.attribSet({vertexPosition:g.positionBufferData.buffer,textureCoord:g.textureCoordinatesBufferData.buffer}),b.elementSet(g.indicesBufferData.buffer),b.uniformSet({projectionMatrix:h,mouse:v.b.add(v.b.mul(s,[1,-1]),[0,l[1]]),time:.001*c,wireframe:!1,noiseSampler:r.noise,gradientColorSampler:r.gradientColor,thicknessScaleSampler:r.thicknessScale,sub:!0}),Object(m.j)(t,null,!0);for(var M=0;M<d.length;M++)if(d[M].t<=2){var x;d[M].t+=f,v.c.set.apply(v.c,[d[M].p2].concat(i()(v.b.mix(d[M].p2,s,.5)))),v.c.set.apply(v.c,[d[M].p1].concat(i()(v.b.mix(d[M].p1,v.b.mix(d[M].p0,d[M].p2,.5),.05))));var R=d[M].p0,y=d[M].p2,T=v.b.sub(y,R),E=v.b.getAngle(T);u.a.identity(p),u.a.translate(p,p,[].concat(i()(v.b.mix(R,y,.5)),[0])),u.a.rotateZ(p,p,E);var S=[[0,1],[.5,1],[.8,0],[1.2,0],[1.5,1],[2,1]],A=[[0,10],[.5,1],[.8,0],[1.2,0],[1.5,1],[2,10]],w=[[0,0],[.75,.5],[1.25,.5],[2,1]],P=[[0,0],[.5,1.5],[.8,4],[1.2,2],[1.5,1.5],[2,0]],_=.5*-v.a.toLineDistance(d[M].p1,d[M].p0,d[M].p2,!0);Math.abs(_)>50&&(_=_/Math.abs(_)*50);var L=Math.min(v.b.distance(d[M].p1,d[M].p2)/2,60);b.uniformSet((x={time:.001*c+d[M].random,modelViewMatrix:p,density:[.2,.2],fixed:[1,1],radius:[L,L],thickness:[10,10],borderPower:[10,2],length:v.b.length(T),offset:_,power:2},a()(x,"power",Object(F.a)(P,d[M].t%P[P.length-1][0])),a()(x,"gradientColorRate",0),a()(x,"gradientColorRate",Object(F.a)(S,d[M].t%S[S.length-1][0])),a()(x,"thicknessScaleRate",0),a()(x,"thicknessScaleRate",Object(F.a)(A,d[M].t%A[A.length-1][0])),a()(x,"flow",!1),a()(x,"flow",!0),a()(x,"flowSegment",2),a()(x,"flowRate",Object(F.a)(w,d[M].t%w[w.length-1][0])),x)),b.draw(g.indicesBufferData.length)}else d.splice(M,1)};!function(){var t=document.querySelector("#glcanvas"),n={alpha:!1},e=t.getContext("webgl2",n);if(e||(e=t.getContext("webgl",n)||t.getContext("experimental-webgl",n),!1),e){var r={electricityModelShader:P(e)},a={model:_(e)},o={noise:Object(m.g)(e,"../img/noise.1daf84e206d328e57277e9ce8efacd53.jpg"),gradientColor:Object(m.g)(e,"../img/gradientColor.f758487c0be0ec72cf38da5d7447431a.jpg"),thicknessScale:Object(m.g)(e,"../img/thicknessScale.b78b734236e1abee25cb773eeb8ff277.jpg")},i=[0,0],u=[],c=[e.canvas.clientWidth,e.canvas.clientHeight],f={};t.addEventListener("mousemove",(function(t){v.c.set(i,t.offsetX,t.offsetY)})),t.addEventListener("click",(function(t){u.push({p0:[400,300],p1:[t.offsetX,t.offsetY],p2:[t.offsetX,t.offsetY],t:0,random:1e3*Math.random()})})),setInterval((function(){u.push({p0:[400,300],p1:[].concat(i),p2:[].concat(i),t:0,random:1e3*Math.random()})}),650);var s=new h(t);s.create(2),L(e,r,a,o,{framebufferTextures:f,size:c});var l=0;requestAnimationFrame((function t(n){var d=.001*(n-l);l=n,requestAnimationFrame(t),D(e,r,a,o,{now:n,delta:d,mPos:i,framebufferTextures:f,size:c,pList:u,moveball:s})}))}else alert("無法初始化WebGL。您的瀏覽器或機器可能不支持它。")}()},8:function(t,n){t.exports=function(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}},9:function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"a",(function(){return u}));for(var r=e(2),a=new Array(200),o=0,i=a.length;o<i;o++)a[o]=1-2*Math.random();var u=function(t,n){if(n<=t[0][0])return t[0][1];if(n>=t[t.length-1][0])return t[t.length-1][1];for(var e=0;e<t.length-1;e++)if(n>=t[e][0]&&n<t[e+1][0])return r.a.mix(t[e][1],t[e+1][1],r.a.inverseMix(t[e][0],t[e+1][0],n))}}});